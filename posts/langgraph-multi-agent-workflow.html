<!DOCTYPE html><!--Cvj9xeiUpHkcp9vB5NjbY--><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/fonts/PretendardVariable-subset.woff2" as="font" crossorigin="anonymous" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/4bc46226652c6481.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/8335364b89d48ee0.js"/><script src="/_next/static/chunks/965dba060c630c21.js" async=""></script><script src="/_next/static/chunks/a1bbb2b404ed3bbb.js" async=""></script><script src="/_next/static/chunks/2a5a9040eca19519.js" async=""></script><script src="/_next/static/chunks/turbopack-b4a5fddf14956454.js" async=""></script><script src="/_next/static/chunks/cd3b13a6464c1b4e.js" async=""></script><script src="/_next/static/chunks/31729fbde67bcbff.js" async=""></script><script src="/_next/static/chunks/66231d519a3a670e.js" async=""></script><script src="/_next/static/chunks/1c8dd1e98f29bd04.js" async=""></script><script src="/_next/static/chunks/de15131553ab167d.js" async=""></script><script src="/_next/static/chunks/b59c211883e2cc85.js" async=""></script><script src="/_next/static/chunks/62ae5b2571fdfa58.js" async=""></script><script src="/_next/static/chunks/e63644fc036e8e8f.js" async=""></script><script src="/_next/static/chunks/e43d62b938f22570.js" async=""></script><script src="/_next/static/chunks/3d8db013779f38f4.js" async=""></script><script src="/_next/static/chunks/2d4c0fd06ca34510.js" async=""></script><script src="/_next/static/chunks/ca3512025a981c82.js" async=""></script><script src="/_next/static/chunks/0e1982b1a6cbd127.js" async=""></script><script src="/_next/static/chunks/808ed0f189237446.js" async=""></script><link rel="preload" href="/fonts/PretendardVariable-subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://img.shields.io"/><link rel="shortcut icon" href="/favicon-light.svg"/><link rel="icon" href="/favicon-light.svg"/><link rel="apple-touch-icon" href="/favicon-light.svg"/><title>LangGraph로 Multi-Agent 워크플로우 구축하기 | 안성진</title><meta name="description" content="Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다."/><meta name="keywords" content="LangGraph,Multi-Agent,Python,Claude API,AI"/><meta name="robots" content="index, follow"/><meta name="google-site-verification" content="kpYkq06WB0cQDLByVOdZD_5HXLkbxzFAvQKQ-Rp9sKY"/><meta property="og:title" content="LangGraph로 Multi-Agent 워크플로우 구축하기"/><meta property="og:description" content="Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다."/><meta property="og:url" content="https://anveloper.dev/posts/langgraph-multi-agent-workflow"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="LangGraph로 Multi-Agent 워크플로우 구축하기"/><meta name="twitter:description" content="Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다."/><script>
  (function() {
    try {
      var theme = localStorage.getItem('theme');
      if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    } catch (e) {}
  })();
</script><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="min-h-screen flex flex-col bg-background text-foreground antialiased"><div hidden=""><!--$--><!--/$--></div><main class="flex-1 flex flex-col"><!--$?--><template id="B:0"></template><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader h-11 w-11 absolute m-auto top-0 bottom-0 right-0 left-0 animate-spin text-muted-foreground z-50" aria-hidden="true"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg><!--/$--></main><footer class="border-t border-border"><div class="max-w-4xl mx-auto px-6 sm:px-8 md:px-12 lg:px-16 py-6 flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-muted-foreground"><span>© 2025 anveloper.dev</span><nav class="flex items-center gap-3"><span class="flex items-center gap-3"><a class="hover:text-foreground transition-colors" target="_blank" rel="noopener noreferrer" href="https://github.com/anveloper">GitHub</a></span><span class="flex items-center gap-3"><span aria-hidden="true">·</span><a class="hover:text-foreground transition-colors" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/anveloper">LinkedIn</a></span><span class="flex items-center gap-3"><span aria-hidden="true">·</span><a class="hover:text-foreground transition-colors" href="/contact">Contact</a></span></nav></div></footer><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/8335364b89d48ee0.js" id="_R_" async=""></script><div hidden id="S:0"><div class="pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen"><div class="w-full max-w-4xl mx-auto"><nav class="hidden xl:block fixed left-[calc(50%+29.5rem)] top-28 w-52 max-h-[calc(100vh-8rem)] overflow-y-auto" aria-label="목차"><p class="text-sm font-semibold text-foreground mb-3">목차</p><ul class="space-y-1.5 border-l border-border"><li><a href="#langgraph와-멀티-에이전트-패턴" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">LangGraph와 멀티 에이전트 패턴</a></li><li><a href="#배경" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">배경</a></li><li><a href="#왜-langgraph인가" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">왜 LangGraph인가</a></li><li><a href="#5개-에이전트-설계" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">5개 에이전트 설계</a></li><li><a href="#워크플로우-구조" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">워크플로우 구조</a></li><li><a href="#공유-상태-state" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">공유 상태 (State)</a></li><li><a href="#노드-함수-구현" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">노드 함수 구현</a></li><li><a href="#그래프-정의" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">그래프 정의</a></li><li><a href="#sse-스트리밍" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">SSE 스트리밍</a></li><li><a href="#에러-처리" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">에러 처리</a></li><li><a href="#성능-프로파일" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">성능 프로파일</a></li><li><a href="#비용-구조" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">비용 구조</a></li><li><a href="#정리" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">정리</a></li></ul></nav><a class="inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6" href="/posts"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg><span>포스트 목록으로 돌아가기</span></a><header class="border-b border-border pb-6 mb-8"><h1 class="text-2xl sm:text-3xl font-bold text-foreground mb-4">LangGraph로 Multi-Agent 워크플로우 구축하기</h1><div class="flex flex-wrap items-center gap-4 mb-4"><span class="text-sm text-muted-foreground">2026-02-09</span></div><div class="flex flex-wrap gap-2"><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">LangGraph</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">Multi-Agent</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">Python</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">Claude API</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">AI</div></div></header><article class="prose prose-neutral dark:prose-invert max-w-none"><h1 id="langgraph로-multi-agent-워크플로우-구축하기" class="text-4xl font-bold mt-10 mb-5 text-foreground">LangGraph로 Multi-Agent 워크플로우 구축하기</h1>
<h2 id="langgraph와-멀티-에이전트-패턴" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">LangGraph와 멀티 에이전트 패턴</h2>
<p class="my-5 leading-7 text-foreground/90">LangGraph는 LangChain 팀이 개발한 <strong class="font-semibold text-foreground">그래프 기반 에이전트 오케스트레이션 프레임워크</strong>다. 기존 LangChain이 체인(순차 파이프라인) 중심이라면, LangGraph는 DAG(Directed Acyclic Graph)와 순환 그래프를 모두 지원하여 조건부 분기, 재시도 루프, 병렬 실행 같은 복잡한 워크플로우를 선언적으로 정의할 수 있다.</p>
<p class="my-5 leading-7 text-foreground/90">핵심 개념은 <strong class="font-semibold text-foreground">StateGraph</strong>다. 노드(에이전트/함수)가 공유 상태를 읽고 쓰며, 엣지가 실행 순서를 정의한다. 상태는 불변(immutable)으로 관리되어, 에이전트가 상태를 업데이트할 때마다 새 버전이 생성된다. 이 덕분에 워크플로우의 각 단계를 추적하고 디버깅할 수 있다.</p>
<p class="my-5 leading-7 text-foreground/90">2025년 AI 에이전트 개발의 가장 큰 흐름은 단일 LLM 호출에서 <strong class="font-semibold text-foreground">멀티 에이전트 시스템</strong>으로의 전환이다. Mixture-of-Agents(MoA)는 여러 LLM의 출력을 병합하여 단일 모델보다 높은 품질을 달성하는 패턴으로, Together AI가 2024년 논문으로 제안했다. LangGraph는 이런 멀티 에이전트 패턴을 구현하기 위한 대표적인 프레임워크이며, Supervisor(감독자), Swarm(군집), Hierarchical(계층적) 등 다양한 오케스트레이션 패턴을 공식 지원한다.</p>
<p class="my-5 leading-7 text-foreground/90">이 글에서는 MoA 패턴에서 영감을 받아, 5개 전문 에이전트가 순차적으로 협력하는 디자인 템플릿 생성 워크플로우를 LangGraph로 구현한 과정을 정리한다.</p>
<h2 id="배경" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">배경</h2>
<p class="my-5 leading-7 text-foreground/90">AI 기반 디자인 템플릿 생성 시스템을 설계하면서, 단일 LLM 호출로는 해결할 수 없는 문제에 부딪혔다. 사용자 요청을 분석하고, 기존 템플릿에서 참고할 만한 것을 검색하고, 새 디자인을 생성하고, 유효성을 검증하는 과정을 하나의 프롬프트로 처리하면 품질이 떨어진다.</p>
<p class="my-5 leading-7 text-foreground/90">Genspark AI의 Mixture-of-Agents(MoA) 패턴에서 영감을 받았다. 여러 전문 에이전트가 각자 역할을 수행하고 결과를 합쳐 하나의 결과물을 만드는 구조다. 이 패턴을 디자인 템플릿 도메인에 적용하기 위해 LangGraph를 선택했다.</p>
<h2 id="왜-langgraph인가" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">왜 LangGraph인가</h2>
<p class="my-5 leading-7 text-foreground/90">LangChain 팀이 만든 그래프 기반 에이전트 오케스트레이션 프레임워크다. 선택한 이유는 명확하다.</p>
<ul class="my-5 ml-6 list-disc space-y-2">
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">그래프 기반 워크플로우</strong>: 에이전트 간 실행 순서를 노드와 엣지로 명시적 정의</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">상태 관리</strong>: <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>TypedDict</span></span></code></span> 기반 공유 상태로 에이전트 간 데이터 전달</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">조건부 라우팅</strong>: 검증 결과에 따라 재생성/완료 분기 처리</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">비동기 지원</strong>: <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ainvoke</span></span></code></span>(일괄), <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>astream</span></span></code></span>(스트리밍) async/await 네이티브 실행</li>
</ul>
<h2 id="5개-에이전트-설계" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">5개 에이전트 설계</h2>
<p class="my-5 leading-7 text-foreground/90">MoA 패턴을 디자인 템플릿 도메인에 맞게 5개 에이전트로 구성했다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">에이전트</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">LLM</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">역할</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Orchestrator</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Claude Sonnet</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">프롬프트 분석, 작업 분해, 생산 타입 분류</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Retriever</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">OpenAI Embedding + pgvector</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">유사 템플릿 벡터 검색 (RAG)</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Analyzer</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Claude Haiku</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">참조 템플릿 패턴 분석</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Generator</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Claude Sonnet</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">XML 템플릿 생성</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Validator</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">규칙 기반 (lxml)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">XML 유효성 검증</td></tr></tbody></table></div>
<p class="my-5 leading-7 text-foreground/90">Claude API는 <strong class="font-semibold text-foreground">이중 모델 전략</strong>을 사용한다. 복잡한 추론이 필요한 오케스트레이션과 생성에는 Sonnet, 패턴 인식 위주의 분석에는 비용이 낮은 Haiku를 배정했다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">모델</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">용도</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Input</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Output</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Claude Sonnet 4.5</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">오케스트레이션, XML 생성</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">$3 / MTok</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">$15 / MTok</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Claude Haiku 4.5</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">패턴 분석, 분류</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">$0.80 / MTok</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">$4 / MTok</td></tr></tbody></table></div>
<h2 id="워크플로우-구조" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">워크플로우 구조</h2>
<div class="my-6 flex justify-center overflow-x-auto bg-card rounded-lg border border-border p-4 [&amp;_svg]:max-w-full"></div>
<p class="my-5 leading-7 text-foreground/90">핵심은 validate → generate 재시도 루프다. Validator가 실패를 반환하면, 실패 사유를 Generator에 전달하여 수정된 XML을 재생성한다.</p>
<h2 id="공유-상태-state" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">공유 상태 (State)</h2>
<p class="my-5 leading-7 text-foreground/90">LangGraph의 핵심은 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>TypedDict</span></span></code></span> 기반 공유 상태다. 각 에이전트(노드)가 상태의 일부를 읽고, 자신의 결과를 병합한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> typing </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> NotRequired, TypedDict</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">class</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> WorkflowState</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">TypedDict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # 입력</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    prompt: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    pod_type: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> |</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> None</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    retry_count: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">int</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # Orchestrator → Retriever, Generator</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    search_query: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    style_requirements: NotRequired[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    generation_instructions: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # Retriever → Analyzer</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    retrieved_templates: NotRequired[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    reference_xmls: NotRequired[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # Analyzer → Generator</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    analysis: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # Generator → Validator</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    generated_xml: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # Validator → (조건부) Generator 또는 END</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    validation_passed: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">bool</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    validation_issues: NotRequired[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    validation_feedback: NotRequired[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">에이전트 간 XML 구조 정보, 스타일 속성, 사용자 선호도가 State를 통해 자연스럽게 공유된다.</p>
<h2 id="노드-함수-구현" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">노드 함수 구현</h2>
<p class="my-5 leading-7 text-foreground/90">각 노드는 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>WorkflowState</span></span></code></span>를 받아 부분 상태 업데이트를 반환하는 async 함수다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> orchestrate_node</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(state: WorkflowState) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> orchestrator.orchestrate(</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;prompt&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">], </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">pod_type</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;pod_type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;pod_type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;pod_type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;search_query&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;search_query&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;style_requirements&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;style_requirements&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, []),</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;generation_instructions&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generation_instructions&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> retrieve_node</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(state: WorkflowState) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    results </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> retriever.retrieve(</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;search_query&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, state[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;prompt&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">])</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;retrieved_templates&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: results,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;reference_xmls&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [r[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;xml_content&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> r </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> results </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> r.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;xml_content&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> generate_node</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(state: WorkflowState) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    feedback </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> (</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validation_feedback&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retry_count&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 0</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        else</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> None</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    xml </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> generator.generate(</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generation_instructions&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, state[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;prompt&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]),</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;analysis&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, {}),</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;reference_xmls&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, []),</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">        feedback</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">feedback,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generated_xml&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: xml}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> validate_node</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(state: WorkflowState) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> validator.validate(state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generated_xml&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">))</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> result.valid:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validation_passed&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">True</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validation_issues&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result.issues}</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    feedback </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> &quot;; &quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.join(issue[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;message&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> issue </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> result.issues)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;validation_passed&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;validation_issues&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result.issues,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;validation_feedback&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: feedback,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;retry_count&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retry_count&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">+</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    }</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">Generator는 재시도 시 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>validation_feedback</span></span></code></span>을 받아 수정 사항을 반영한다. Validator는 LLM 없이 lxml 기반 규칙 검증으로 비용이 $0이다.</p>
<h2 id="그래프-정의" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">그래프 정의</h2>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> langgraph.graph </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> END</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, StateGraph</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> _should_retry</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(state: WorkflowState) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validation_passed&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> END</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> state.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retry_count&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> settings.max_retries:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> END</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> &quot;generate&quot;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> build_graph</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">() -&gt; StateGraph:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> StateGraph(WorkflowState)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_node(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;orchestrate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, orchestrate_node)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_node(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retrieve&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, retrieve_node)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_node(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;analyze&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, analyze_node)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_node(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, generate_node)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_node(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, validate_node)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.set_entry_point(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;orchestrate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_edge(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;orchestrate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retrieve&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_edge(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;retrieve&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;analyze&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_edge(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;analyze&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_edge(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;generate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    graph.add_conditional_edges(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;validate&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, _should_retry)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> graph</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>add_conditional_edges</span></span></code></span>로 validate 노드 이후의 분기를 선언적으로 정의한다. <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>_should_retry</span></span></code></span> 함수가 상태를 보고 다음 노드(<span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>&quot;generate&quot;</span></span></code></span> 또는 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>END</span></span></code></span>)를 결정한다.</p>
<h2 id="sse-스트리밍" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">SSE 스트리밍</h2>
<p class="my-5 leading-7 text-foreground/90"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>astream(stream_mode=&quot;updates&quot;)</span></span></code></span>는 각 노드 실행 완료 시마다 상태 업데이트를 yield한다. 이를 SSE 이벤트로 변환하면 프론트엔드에서 진행 상황을 실시간으로 보여줄 수 있다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">compiled </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> build_graph().compile()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> chunk </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> compiled.astream(initial_state, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">stream_mode</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;updates&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> node_name, state_update </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> chunk.items():</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        stage </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> NODE_TO_STAGE</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">[node_name]</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        yield</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> sse_event({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;agent_complete&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;stage&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: stage})</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">노드와 SSE 스테이지의 매핑:</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">노드</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">SSE 스테이지</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">orchestrate</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">orchestrating</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">retrieve</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">retrieving</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">analyze</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">analyzing</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">generate</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">generating</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">validate</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">validating</td></tr></tbody></table></div>
<h2 id="에러-처리" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">에러 처리</h2>
<p class="my-5 leading-7 text-foreground/90">각 노드는 외부 서비스(LLM API, DB) 호출 시 에러를 처리한다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">에러</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">대응</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>RateLimitError</span></span></code></span></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">exponential backoff (1초 → 2초 → 4초)</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>APIConnectionError</span></span></code></span></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">에러 종료, SSE error 이벤트</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">DB 연결 실패</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">빈 결과 반환, 워크플로우 계속</td></tr></tbody></table></div>
<h2 id="성능-프로파일" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">성능 프로파일</h2>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">단계</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">에이전트</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">예상 소요 시간</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">1</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Orchestrator (Claude Sonnet)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~2초</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">2</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Retriever (Embedding + pgvector)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~1.5초</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">3</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Analyzer (Claude Haiku)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~3초</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">4</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Generator (Claude Sonnet)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~10-15초</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">5</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Validator (lxml)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">0.1초 미만</td></tr></tbody></table></div>
<p class="my-5 leading-7 text-foreground/90">전체 성공 시 ~17-22초, 재시도 1회 시 ~30-37초. Generator가 전체 시간의 50-70%를 차지하는 병목이다.</p>
<h2 id="비용-구조" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">비용 구조</h2>
<p class="my-5 leading-7 text-foreground/90">워크플로우 1회 실행 비용:</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">에이전트</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">모델</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Input 토큰</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Output 토큰</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">호출당 비용</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Orchestrator</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Sonnet</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~500</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~300</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$0.006</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Analyzer</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Haiku</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~2,000</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~500</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$0.004</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Generator</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Sonnet</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~3,000</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~4,000</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$0.069</td></tr></tbody></table></div>
<ul class="my-5 ml-6 list-disc space-y-2">
<li class="text-foreground/90 leading-7">성공 시: ~$0.08</li>
<li class="text-foreground/90 leading-7">재시도 1회: ~$0.15</li>
<li class="text-foreground/90 leading-7">월 1,000회 생성 기준: ~$80-150</li>
</ul>
<p class="my-5 leading-7 text-foreground/90">Generator가 전체 비용의 80% 이상을 차지한다.</p>
<h2 id="정리" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">정리</h2>
<p class="my-5 leading-7 text-foreground/90">LangGraph로 멀티 에이전트 워크플로우를 구현하면서 느낀 점:</p>
<ul class="my-5 ml-6 list-disc space-y-2">
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">State 설계가 핵심</strong>: 에이전트 간 데이터 전달 구조를 처음에 잘 잡아야 한다. <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>TypedDict</span></span></code></span> 기반이라 타입 안전성도 확보된다.</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">이중 모델 전략의 효과</strong>: Sonnet과 Haiku를 역할별로 분리하여 비용 대비 성능을 최적화할 수 있다.</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">조건부 라우팅의 유연함</strong>: 검증 실패 → 재생성 루프를 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>add_conditional_edges</span></span></code></span> 한 줄로 구현할 수 있다.</li>
<li class="text-foreground/90 leading-7"><strong class="font-semibold text-foreground">스트리밍 통합이 자연스러움</strong>: <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>astream</span></span></code></span>으로 노드별 진행 상황을 SSE로 전달하는 구조가 프레임워크 레벨에서 지원된다.</li>
</ul>
<p class="my-5 leading-7 text-foreground/90">단일 LLM 호출 대비 복잡도는 높지만, 각 에이전트가 명확한 책임을 갖기 때문에 디버깅과 개선이 훨씬 수월하다.</p></article></div></div><!--$--><!--/$--></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[128739,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\"],\"Providers\"]\n3:I[163720,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\"],\"NavBar\"]\n4:I[925270,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n5:I[585455,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n6:I[951506,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\",\"/_next/static/chunks/b59c211883e2cc85.js\",\"/_next/static/chunks/62ae5b2571fdfa58.js\",\"/_next/static/chunks/e63644fc036e8e8f.js\",\"/_next/static/chunks/e43d62b938f22570.js\",\"/_next/static/chunks/3d8db013779f38f4.js\",\"/_next/static/chunks/2d4c0fd06ca34510.js\",\"/_next/static/chunks/ca3512025a981c82.js\",\"/_next/static/chunks/0e1982b1a6cbd127.js\",\"/_next/static/chunks/808ed0f189237446.js\"],\"\"]\n7:I[453013,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\"],\"default\"]\nd:I[807871,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n:HL[\"/_next/static/chunks/4bc46226652c6481.css\",\"style\"]\n:HL[\"/fonts/PretendardVariable-subset.woff2\",\"font\",{\"crossOrigin\":\"anonymous\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"Cvj9xeiUpHkcp9vB5NjbY\",\"c\":[\"\",\"posts\",\"langgraph-multi-agent-workflow\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"langgraph-multi-agent-workflow\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/4bc46226652c6481.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/31729fbde67bcbff.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/66231d519a3a670e.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  (function() {\\n    try {\\n      var theme = localStorage.getItem('theme');\\n      if (theme === 'dark' || (!theme \u0026\u0026 window.matchMedia('(prefers-color-scheme: dark)').matches)) {\\n        document.documentElement.classList.add('dark');\\n      } else {\\n        document.documentElement.classList.remove('dark');\\n      }\\n    } catch (e) {}\\n  })();\\n\"}}],[\"$\",\"link\",null,{\"rel\":\"preload\",\"href\":\"/fonts/PretendardVariable-subset.woff2\",\"as\":\"font\",\"type\":\"font/woff2\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://img.shields.io\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon-light.svg\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon-light.svg\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon-light.svg\"}]]}],[\"$\",\"body\",null,{\"className\":\"min-h-screen flex flex-col bg-background text-foreground antialiased\",\"children\":[[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 flex flex-col\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"border-t border-border\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto px-6 sm:px-8 md:px-12 lg:px-16 py-6 flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-muted-foreground\",\"children\":[[\"$\",\"span\",null,{\"children\":\"© 2025 anveloper.dev\"}],[\"$\",\"nav\",null,{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",\"GitHub\",{\"className\":\"flex items-center gap-3\",\"children\":[false,[\"$\",\"$L6\",null,{\"href\":\"https://github.com/anveloper\",\"className\":\"hover:text-foreground transition-colors\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"GitHub\"}]]}],[\"$\",\"span\",\"LinkedIn\",{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",null,{\"aria-hidden\":true,\"children\":\"·\"}],[\"$\",\"$L6\",null,{\"href\":\"https://www.linkedin.com/in/anveloper\",\"className\":\"hover:text-foreground transition-colors\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"LinkedIn\"}]]}],[\"$\",\"span\",\"Contact\",{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",null,{\"aria-hidden\":true,\"children\":\"·\"}],[\"$\",\"$L6\",null,{\"href\":\"/contact\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Contact\"}]]}]]}]]}]}]]}],[\"$\",\"$L7\",null,{}]]}]]}]]}],{\"children\":[\"$L8\",{\"children\":[\"$L9\",{\"children\":[\"$La\",{},null,false,false]},null,false,false]},null,false,false]},[\"$Lb\",[],[]],false,false],\"$Lc\",false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"OutletBoundary\"]\n10:\"$Sreact.suspense\"\n12:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"ViewportBoundary\"]\n14:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"MetadataBoundary\"]\n8:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\n9:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\na:[\"$\",\"$1\",\"c\",{\"children\":[\"$Le\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/b59c211883e2cc85.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/62ae5b2571fdfa58.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/e63644fc036e8e8f.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/e43d62b938f22570.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-4\",{\"src\":\"/_next/static/chunks/3d8db013779f38f4.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-5\",{\"src\":\"/_next/static/chunks/2d4c0fd06ca34510.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-6\",{\"src\":\"/_next/static/chunks/ca3512025a981c82.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-7\",{\"src\":\"/_next/static/chunks/0e1982b1a6cbd127.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-8\",{\"src\":\"/_next/static/chunks/808ed0f189237446.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Lf\",null,{\"children\":[\"$\",\"$10\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@11\"}]}]]}]\nb:[\"$\",\"svg\",\"l\",{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-loader h-11 w-11 absolute m-auto top-0 bottom-0 right-0 left-0 animate-spin text-muted-foreground z-50\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"3427ic\",{\"d\":\"M12 2v4\"}],[\"$\",\"path\",\"r700ao\",{\"d\":\"m16.2 7.8 2.9-2.9\"}],[\"$\",\"path\",\"wj9ykh\",{\"d\":\"M18 12h4\"}],[\"$\",\"path\",\"1bxg5t\",{\"d\":\"m16.2 16.2 2.9 2.9\"}],[\"$\",\"path\",\"jadmvz\",{\"d\":\"M12 18v4\"}],[\"$\",\"path\",\"bwix9q\",{\"d\":\"m4.9 19.1 2.9-2.9\"}],[\"$\",\"path\",\"j09sii\",{\"d\":\"M2 12h4\"}],[\"$\",\"path\",\"giyufr\",{\"d\":\"m4.9 4.9 2.9 2.9\"}],\"$undefined\"]}]\nc:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L12\",null,{\"children\":\"$L13\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L14\",null,{\"children\":[\"$\",\"$10\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L15\"}]}]}],null]}]\n"])</script><script>self.__next_f.push([1,"13:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"16:I[166627,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\",\"/_next/static/chunks/b59c211883e2cc85.js\",\"/_next/static/chunks/62ae5b2571fdfa58.js\",\"/_next/static/chunks/e63644fc036e8e8f.js\",\"/_next/static/chunks/e43d62b938f22570.js\",\"/_next/static/chunks/3d8db013779f38f4.js\",\"/_next/static/chunks/2d4c0fd06ca34510.js\",\"/_next/static/chunks/ca3512025a981c82.js\",\"/_next/static/chunks/0e1982b1a6cbd127.js\",\"/_next/static/chunks/808ed0f189237446.js\"],\"TableOfContents\"]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"div\",null,{\"className\":\"pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full max-w-4xl mx-auto\",\"children\":[[\"$\",\"$L16\",null,{\"items\":[{\"id\":\"langgraph와-멀티-에이전트-패턴\",\"text\":\"LangGraph와 멀티 에이전트 패턴\",\"level\":2},{\"id\":\"배경\",\"text\":\"배경\",\"level\":2},{\"id\":\"왜-langgraph인가\",\"text\":\"왜 LangGraph인가\",\"level\":2},{\"id\":\"5개-에이전트-설계\",\"text\":\"5개 에이전트 설계\",\"level\":2},{\"id\":\"워크플로우-구조\",\"text\":\"워크플로우 구조\",\"level\":2},{\"id\":\"공유-상태-state\",\"text\":\"공유 상태 (State)\",\"level\":2},{\"id\":\"노드-함수-구현\",\"text\":\"노드 함수 구현\",\"level\":2},{\"id\":\"그래프-정의\",\"text\":\"그래프 정의\",\"level\":2},{\"id\":\"sse-스트리밍\",\"text\":\"SSE 스트리밍\",\"level\":2},{\"id\":\"에러-처리\",\"text\":\"에러 처리\",\"level\":2},{\"id\":\"성능-프로파일\",\"text\":\"성능 프로파일\",\"level\":2},{\"id\":\"비용-구조\",\"text\":\"비용 구조\",\"level\":2},{\"id\":\"정리\",\"text\":\"정리\",\"level\":2}]}],[\"$\",\"$L6\",null,{\"href\":\"/posts\",\"className\":\"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-4 h-4\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"포스트 목록으로 돌아가기\"}]]}],[\"$\",\"header\",null,{\"className\":\"border-b border-border pb-6 mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl sm:text-3xl font-bold text-foreground mb-4\",\"children\":\"LangGraph로 Multi-Agent 워크플로우 구축하기\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center gap-4 mb-4\",\"children\":[\"$\",\"span\",null,{\"className\":\"text-sm text-muted-foreground\",\"children\":\"2026-02-09\"}]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2\",\"children\":[[\"$\",\"div\",\"LangGraph\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"LangGraph\"}],[\"$\",\"div\",\"Multi-Agent\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"Multi-Agent\"}],[\"$\",\"div\",\"Python\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"Python\"}],[\"$\",\"div\",\"Claude API\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"Claude API\"}],[\"$\",\"div\",\"AI\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"AI\"}]]}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-neutral dark:prose-invert max-w-none\",\"children\":\"$L17\"}]]}]}]\n"])</script><script>self.__next_f.push([1,"11:null\n15:[[\"$\",\"title\",\"0\",{\"children\":\"LangGraph로 Multi-Agent 워크플로우 구축하기 | 안성진\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"LangGraph,Multi-Agent,Python,Claude API,AI\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"google-site-verification\",\"content\":\"kpYkq06WB0cQDLByVOdZD_5HXLkbxzFAvQKQ-Rp9sKY\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"LangGraph로 Multi-Agent 워크플로우 구축하기\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다.\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:url\",\"content\":\"https://anveloper.dev/posts/langgraph-multi-agent-workflow\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"LangGraph로 Multi-Agent 워크플로우 구축하기\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:description\",\"content\":\"Mixture-of-Agents 패턴을 LangGraph StateGraph로 구현하여 디자인 템플릿을 자동 생성하는 멀티 에이전트 시스템을 설계한 과정을 정리했다.\"}]]\n"])</script><script>self.__next_f.push([1,"17:[[\"$\",\"h1\",null,{\"id\":\"langgraph로-multi-agent-워크플로우-구축하기\",\"children\":\"LangGraph로 Multi-Agent 워크플로우 구축하기\",\"className\":\"text-4xl font-bold mt-10 mb-5 text-foreground\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"langgraph와-멀티-에이전트-패턴\",\"children\":\"LangGraph와 멀티 에이전트 패턴\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"LangGraph는 LangChain 팀이 개발한 \",[\"$\",\"strong\",null,{\"children\":\"그래프 기반 에이전트 오케스트레이션 프레임워크\",\"className\":\"font-semibold text-foreground\"}],\"다. 기존 LangChain이 체인(순차 파이프라인) 중심이라면, LangGraph는 DAG(Directed Acyclic Graph)와 순환 그래프를 모두 지원하여 조건부 분기, 재시도 루프, 병렬 실행 같은 복잡한 워크플로우를 선언적으로 정의할 수 있다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"핵심 개념은 \",[\"$\",\"strong\",null,{\"children\":\"StateGraph\",\"className\":\"font-semibold text-foreground\"}],\"다. 노드(에이전트/함수)가 공유 상태를 읽고 쓰며, 엣지가 실행 순서를 정의한다. 상태는 불변(immutable)으로 관리되어, 에이전트가 상태를 업데이트할 때마다 새 버전이 생성된다. 이 덕분에 워크플로우의 각 단계를 추적하고 디버깅할 수 있다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"2025년 AI 에이전트 개발의 가장 큰 흐름은 단일 LLM 호출에서 \",[\"$\",\"strong\",null,{\"children\":\"멀티 에이전트 시스템\",\"className\":\"font-semibold text-foreground\"}],\"으로의 전환이다. Mixture-of-Agents(MoA)는 여러 LLM의 출력을 병합하여 단일 모델보다 높은 품질을 달성하는 패턴으로, Together AI가 2024년 논문으로 제안했다. LangGraph는 이런 멀티 에이전트 패턴을 구현하기 위한 대표적인 프레임워크이며, Supervisor(감독자), Swarm(군집), Hierarchical(계층적) 등 다양한 오케스트레이션 패턴을 공식 지원한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이 글에서는 MoA 패턴에서 영감을 받아, 5개 전문 에이전트가 순차적으로 협력하는 디자인 템플릿 생성 워크플로우를 LangGraph로 구현한 과정을 정리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"배경\",\"children\":\"배경\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"AI 기반 디자인 템플릿 생성 시스템을 설계하면서, 단일 LLM 호출로는 해결할 수 없는 문제에 부딪혔다. 사용자 요청을 분석하고, 기존 템플릿에서 참고할 만한 것을 검색하고, 새 디자인을 생성하고, 유효성을 검증하는 과정을 하나의 프롬프트로 처리하면 품질이 떨어진다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Genspark AI의 Mixture-of-Agents(MoA) 패턴에서 영감을 받았다. 여러 전문 에이전트가 각자 역할을 수행하고 결과를 합쳐 하나의 결과물을 만드는 구조다. 이 패턴을 디자인 템플릿 도메인에 적용하기 위해 LangGraph를 선택했다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"왜-langgraph인가\",\"children\":\"왜 LangGraph인가\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"LangChain 팀이 만든 그래프 기반 에이전트 오케스트레이션 프레임워크다. 선택한 이유는 명확하다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"그래프 기반 워크플로우\",\"className\":\"font-semibold text-foreground\"}],\": 에이전트 간 실행 순서를 노드와 엣지로 명시적 정의\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"상태 관리\",\"className\":\"font-semibold text-foreground\"}],\": \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"TypedDict\"}]}]}]}],\" 기반 공유 상태로 에이전트 간 데이터 전달\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"조건부 라우팅\",\"className\":\"font-semibold text-foreground\"}],\": 검증 결과에 따라 재생성/완료 분기 처리\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"비동기 지원\",\"className\":\"font-semibold text-foreground\"}],\": \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\"$L18\"}]}]}],\"(일괄), \",\"$L19\",\"(스트리밍) async/await 네이티브 실행\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\"],\"className\":\"my-5 ml-6 list-disc space-y-2\"}],\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\"]\n"])</script><script>self.__next_f.push([1,"41:I[463508,[\"/_next/static/chunks/cd3b13a6464c1b4e.js\",\"/_next/static/chunks/31729fbde67bcbff.js\",\"/_next/static/chunks/66231d519a3a670e.js\",\"/_next/static/chunks/b59c211883e2cc85.js\",\"/_next/static/chunks/62ae5b2571fdfa58.js\",\"/_next/static/chunks/e63644fc036e8e8f.js\",\"/_next/static/chunks/e43d62b938f22570.js\",\"/_next/static/chunks/3d8db013779f38f4.js\",\"/_next/static/chunks/2d4c0fd06ca34510.js\",\"/_next/static/chunks/ca3512025a981c82.js\",\"/_next/static/chunks/0e1982b1a6cbd127.js\",\"/_next/static/chunks/808ed0f189237446.js\"],\"Mermaid\"]\n18:[\"$\",\"span\",null,{\"children\":\"ainvoke\"}]\n19:[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"astream\"}]}]}]}]\n1a:[\"$\",\"h2\",null,{\"id\":\"5개-에이전트-설계\",\"children\":\"5개 에이전트 설계\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n1b:[\"$\",\"p\",null,{\"children\":\"MoA 패턴을 디자인 템플릿 도메인에 맞게 5개 에이전트로 구성했다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"에이전트\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"LLM\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"역할\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Orchestrator\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Claude Sonnet\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"프롬프트 분석, 작업 분해, 생산 타입 분류\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Retriever\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"OpenAI Embedding + pgvector\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"유사 템플릿 벡터 검색 (RAG)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Analyzer\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Claude Haiku\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"참조 템플릿 패턴 분석\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Generator\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Claude Sonnet\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"XML 템플릿 생성\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Validator\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"규칙 기반 (lxml)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"XML 유효성 검증\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1d:[\"$\",\"p\",null,{\"children\":[\"Claude API는 \",[\"$\",\"strong\",null,{\"children\":\"이중 모델 전략\",\"className\":\"font-semibold text-foreground\"}],\"을 사용한다. 복잡한 추론이 필요한 오케스트레이션과 생성에는 Sonnet, 패턴 인식 위주의 분석에는 비용이 낮은 Haiku를 배정했다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"모델\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"용도\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"Input\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"Output\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Claude Sonnet 4.5\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"오케스트레이션, XML 생성\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"$$3 / MTok\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"$$15 / MTok\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Claude Haiku 4.5\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"패턴 분석, 분류\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"$$0.80 / MTok\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"$$4 / MTok\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1f:[\"$\",\"h2\",null,{\"id\":\"워크플로우-구조\",\"children\":\"워크플로우 구조\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n20:[\"$\",\"$L41\",null,{\"chart\":\"flowchart LR\\n    S[\u0026quot;START\u0026quot;] --\u003e O[\u0026quot;orchestrate\u0026quot;]\\n    O --\u003e R[\u0026quot;retrieve\u0026quot;]\\n    R --\u003e A[\u0026quot;analyze\u0026quot;]\\n    A --\u003e G[\u0026quot;generate\u0026quot;]\\n    G --\u003e V{\u0026quot;validate\u0026quot;}\\n    V --\u003e|PASS| E[\u0026quot;END\u0026quot;]\\n    V --\u003e|\u0026quot;FAIL (retry \u003c 3)\u0026quot;| G\\n    V --\u003e|\u0026quot;FAIL (retry \u003e= 3)\u0026quot;| E\"}]\n21:[\"$\",\"p\",null,{\"children\":\"핵심은 validate → generate 재시도 루프다. Validator가 실패를 반환하면, 실패 사유를 Generator에 전달하여 수정된 XML을 재생성한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n22:[\"$\",\"h2\",null,{\"id\":\"공유-상태-state\",\"children\":\"공유 상태 (State)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n23:[\"$\",\"p\",null,{\"children\":[\"LangGraph의 핵심은 \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"TypedDict\"}]}]}]}],\" 기반 공유 상태다. 각 에이전트(노드)가 상태의 일부를 읽고, 자신의 결과를 병합한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"24:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" typing \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" NotRequired, TypedDict\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" WorkflowState\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"TypedDict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # 입력\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    prompt: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    pod_type: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" |\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    retry_count: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"int\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # Orchestrator → Retriever, Generator\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    search_query: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    style_requirements: NotRequired[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    generation_instructions: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # Retriever → Analyzer\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    retrieved_templates: NotRequired[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    reference_xmls: NotRequired[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],\"$L42\"]}],\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"p\",null,{\"children\":\"에이전트 간 XML 구조 정보, 스타일 속성, 사용자 선호도가 State를 통해 자연스럽게 공유된다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n26:[\"$\",\"h2\",null,{\"id\":\"노드-함수-구현\",\"children\":\"노드 함수 구현\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n27:[\"$\",\"p\",null,{\"children\":[\"각 노드는 \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"WorkflowState\"}]}]}]}],\"를 받아 부분 상태 업데이트를 반환하는 async 함수다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"28:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" orchestrate_node\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(state: WorkflowState) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    result \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" orchestrator.orchestrate(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"prompt\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"pod_type\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"pod_type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"pod_type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"pod_type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"search_query\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"search_query\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"style_requirements\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"style_requirements\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", []),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"generation_instructions\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generation_instructions\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"29:[\"$\",\"p\",null,{\"children\":[\"Generator는 재시도 시 \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"validation_feedback\"}]}]}]}],\"을 받아 수정 사항을 반영한다. Validator는 LLM 없이 lxml 기반 규칙 검증으로 비용이 $0이다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n2a:[\"$\",\"h2\",null,{\"id\":\"그래프-정의\",\"children\":\"그래프 정의\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n"])</script><script>self.__next_f.push([1,"2b:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" langgraph.graph \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" END\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", StateGraph\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" _should_retry\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(state: WorkflowState) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validation_passed\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" END\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retry_count\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" settings.max_retries:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" END\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" \\\"generate\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" build_graph\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"() -\u003e StateGraph:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" StateGraph(WorkflowState)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_node(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"orchestrate\\\"\"}],\"$L72\"]}],\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"2c:[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"add_conditional_edges\"}]}]}]}],\"로 validate 노드 이후의 분기를 선언적으로 정의한다. \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"_should_retry\"}]}]}]}],\" 함수가 상태를 보고 다음 노드(\",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"\\\"generate\\\"\"}]}]}]}],\" 또는 \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"END\"}]}]}]}],\")를 결정한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"2d:[\"$\",\"h2\",null,{\"id\":\"sse-스트리밍\",\"children\":\"SSE 스트리밍\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n2e:[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"astream(stream_mode=\\\"updates\\\")\"}]}]}]}],\"는 각 노드 실행 완료 시마다 상태 업데이트를 yield한다. 이를 SSE 이벤트로 변환하면 프론트엔드에서 진행 상황을 실시간으로 보여줄 수 있다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"2f:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"compiled \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" build_graph().compile()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" chunk \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" compiled.astream(initial_state, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"stream_mode\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"updates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" node_name, state_update \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" chunk.items():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        stage \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" NODE_TO_STAGE\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"[node_name]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        yield\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" sse_event({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"agent_complete\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"stage\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": stage})\"}]]}]]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"30:[\"$\",\"p\",null,{\"children\":\"노드와 SSE 스테이지의 매핑:\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"노드\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"SSE 스테이지\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"orchestrate\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"orchestrating\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"retrieve\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"retrieving\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"analyze\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"analyzing\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"generate\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"generating\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"validate\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"validating\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"h2\",null,{\"id\":\"에러-처리\",\"children\":\"에러 처리\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n33:[\"$\",\"p\",null,{\"children\":\"각 노드는 외부 서비스(LLM API, DB) 호출 시 에러를 처리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"34:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"에러\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"대응\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"RateLimitError\"}]}]}]}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"exponential backoff (1초 → 2초 → 4초)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"APIConnectionError\"}]}]}]}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"에러 종료, SSE error 이벤트\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"DB 연결 실패\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"빈 결과 반환, 워크플로우 계속\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"h2\",null,{\"id\":\"성능-프로파일\",\"children\":\"성능 프로파일\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"단계\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"에이전트\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"예상 소요 시간\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"1\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Orchestrator (Claude Sonnet)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~2초\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"2\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Retriever (Embedding + pgvector)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~1.5초\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"3\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Analyzer (Claude Haiku)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~3초\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"4\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Generator (Claude Sonnet)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~10-15초\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"5\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Validator (lxml)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"0.1초 미만\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"37:[\"$\",\"p\",null,{\"children\":\"전체 성공 시 ~17-22초, 재시도 1회 시 ~30-37초. Generator가 전체 시간의 50-70%를 차지하는 병목이다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n38:[\"$\",\"h2\",null,{\"id\":\"비용-구조\",\"children\":\"비용 구조\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n39:[\"$\",\"p\",null,{\"children\":\"워크플로우 1회 실행 비용:\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"3a:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"에이전트\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"모델\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"Input 토큰\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"Output 토큰\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"호출당 비용\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Orchestrator\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Sonnet\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~500\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~300\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$0.006\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Analyzer\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Haiku\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~2,000\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~500\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$0.004\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Generator\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"Sonnet\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~3,000\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~4,000\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$0.069\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3b:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"성공 시: ~$0.08\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"재시도 1회: ~$0.15\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"월 1,000회 생성 기준: ~$80-150\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\"],\"className\":\"my-5 ml-6 list-disc space-y-2\"}]\n3c:[\"$\",\"p\",null,{\"children\":\"Generator가 전체 비용의 80% 이상을 차지한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n3d:[\"$\",\"h2\",null,{\"id\":\"정리\",\"children\":\"정리\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n3e:[\"$\",\"p\",null,{\"children\":\"LangGraph로 멀티 에이전트 워크플로우를 구현하면서 느낀 점:\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"3f:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"State 설계가 핵심\",\"className\":\"font-semibold text-foreground\"}],\": 에이전트 간 데이터 전달 구조를 처음에 잘 잡아야 한다. \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"TypedDict\"}]}]}]}],\" 기반이라 타입 안전성도 확보된다.\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"이중 모델 전략의 효과\",\"className\":\"font-semibold text-foreground\"}],\": Sonnet과 Haiku를 역할별로 분리하여 비용 대비 성능을 최적화할 수 있다.\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"조건부 라우팅의 유연함\",\"className\":\"font-semibold text-foreground\"}],\": 검증 실패 → 재생성 루프를 \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"add_conditional_edges\"}]}]}]}],\" 한 줄로 구현할 수 있다.\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"스트리밍 통합이 자연스러움\",\"className\":\"font-semibold text-foreground\"}],\": \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"astream\"}]}]}]}],\"으로 노드별 진행 상황을 SSE로 전달하는 구조가 프레임워크 레벨에서 지원된다.\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\"],\"className\":\"my-5 ml-6 list-disc space-y-2\"}]\n"])</script><script>self.__next_f.push([1,"40:[\"$\",\"p\",null,{\"children\":\"단일 LLM 호출 대비 복잡도는 높지만, 각 에이전트가 명확한 책임을 갖기 때문에 디버깅과 개선이 훨씬 수월하다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"42:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]\"}]\n43:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n44:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # Analyzer → Generator\"}]}]\n45:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    analysis: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}]\n46:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n47:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # Generator → Validator\"}]}]\n48:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    generated_xml: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}]\n49:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n4a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # Validator → (조건부) Generator 또는 END\"}]}]\n4b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    validation_passed: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"bool\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}]\n4c:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    validation_issues: NotRequired[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]\"}]]}]\n4d:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    validation_feedback: NotRequired[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}]\n4e:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    }\"}]}]\n4f:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n50:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" retrieve_node\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(state: WorkflowState) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}]\n51:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    results \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" retriever.retrieve(\"}]]}]\n52:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\""])</script><script>self.__next_f.push([1,"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"search_query\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", state[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"prompt\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"])\"}]]}]\n53:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}]\n54:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}]\n55:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"retrieved_templates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": results,\"}]]}]\n56:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"reference_xmls\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [r[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"xml_content\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" r \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" results \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" r.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"xml_content\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")],\"}]]}]\n57:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    }\"}]}]\n58:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n59:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" generate_node\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(state: WorkflowState) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}]\n5a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    feedback \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}]]}]\n5b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validation_feedback\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n5c:[\"$\",\"span\",nul"])</script><script>self.__next_f.push([1,"l,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retry_count\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 0\"}]]}]\n5d:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        else\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" None\"}]]}]\n5e:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}]\n5f:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    xml \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" generator.generate(\"}]]}]\n60:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generation_instructions\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", state[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"prompt\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]),\"}]]}]\n61:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"analysis\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", {}),\"}]]}]\n62:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"reference_xmls\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", []),\"}]]}]\n63:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"        feedback\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"feedback,\"}]]}]\n64:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}]\n65:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generated_xml\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": xml}\"}]]}]\n66:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n67:[\"$\",\"span\""])</script><script>self.__next_f.push([1,",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" validate_node\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(state: WorkflowState) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}]\n68:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    result \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" validator.validate(state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generated_xml\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"))\"}]]}]\n69:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" result.valid:\"}]]}]\n6a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validation_passed\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"True\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validation_issues\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result.issues}\"}]]}]\n6b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    feedback \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" \\\"; \\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".join(issue[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"message\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" issue \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" result.issues)\"}]]}]\n6c:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}]\n6d:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"validation_passed\\\"\"}]"])</script><script>self.__next_f.push([1,",[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"False\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}]\n6e:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"validation_issues\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result.issues,\"}]]}]\n6f:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"validation_feedback\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": feedback,\"}]]}]\n70:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"retry_count\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": state.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retry_count\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 1\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}]\n71:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    }\"}]}]\n72:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", orchestrate_node)\"}]\n73:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_node(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retrieve\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", retrieve_node)\"}]]}]\n74:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_node(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"analyze\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", analyze_node)\"}]]}]\n75:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_node(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", generate_node)\"}]]}]\n76:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_node(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", validate_node)\"}]]}]\n77:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n78:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.set_entry_point(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"orchestrate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n79:[\"$\",\"span\",null,{\"data-line\":\"\",\"c"])</script><script>self.__next_f.push([1,"hildren\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_edge(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"orchestrate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retrieve\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n7a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_edge(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"retrieve\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"analyze\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n7b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_edge(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"analyze\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n7c:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_edge(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"generate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]\n7d:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    graph.add_conditional_edges(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"validate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", _should_retry)\"}]]}]\n7e:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n7f:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" graph\"}]]}]\n"])</script></body></html>