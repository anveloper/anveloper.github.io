1:"$Sreact.fragment"
2:I[166627,["/_next/static/chunks/34f9db3e742712f8.js","/_next/static/chunks/66231d519a3a670e.js","/_next/static/chunks/b59c211883e2cc85.js","/_next/static/chunks/62ae5b2571fdfa58.js","/_next/static/chunks/808ed0f189237446.js","/_next/static/chunks/d20696d588f50da6.js","/_next/static/chunks/0e1982b1a6cbd127.js","/_next/static/chunks/2d4c0fd06ca34510.js","/_next/static/chunks/ca3512025a981c82.js","/_next/static/chunks/3d8db013779f38f4.js","/_next/static/chunks/e63644fc036e8e8f.js"],"TableOfContents"]
3:I[951506,["/_next/static/chunks/34f9db3e742712f8.js","/_next/static/chunks/66231d519a3a670e.js","/_next/static/chunks/b59c211883e2cc85.js","/_next/static/chunks/62ae5b2571fdfa58.js","/_next/static/chunks/808ed0f189237446.js","/_next/static/chunks/d20696d588f50da6.js","/_next/static/chunks/0e1982b1a6cbd127.js","/_next/static/chunks/2d4c0fd06ca34510.js","/_next/static/chunks/ca3512025a981c82.js","/_next/static/chunks/3d8db013779f38f4.js","/_next/static/chunks/e63644fc036e8e8f.js"],""]
43:I[463508,["/_next/static/chunks/34f9db3e742712f8.js","/_next/static/chunks/66231d519a3a670e.js","/_next/static/chunks/b59c211883e2cc85.js","/_next/static/chunks/62ae5b2571fdfa58.js","/_next/static/chunks/808ed0f189237446.js","/_next/static/chunks/d20696d588f50da6.js","/_next/static/chunks/0e1982b1a6cbd127.js","/_next/static/chunks/2d4c0fd06ca34510.js","/_next/static/chunks/ca3512025a981c82.js","/_next/static/chunks/3d8db013779f38f4.js","/_next/static/chunks/e63644fc036e8e8f.js"],"Mermaid"]
73:I[826107,["/_next/static/chunks/34f9db3e742712f8.js","/_next/static/chunks/66231d519a3a670e.js","/_next/static/chunks/b59c211883e2cc85.js","/_next/static/chunks/62ae5b2571fdfa58.js","/_next/static/chunks/808ed0f189237446.js","/_next/static/chunks/d20696d588f50da6.js","/_next/static/chunks/0e1982b1a6cbd127.js","/_next/static/chunks/2d4c0fd06ca34510.js","/_next/static/chunks/ca3512025a981c82.js","/_next/static/chunks/3d8db013779f38f4.js","/_next/static/chunks/e63644fc036e8e8f.js"],"GiscusComments"]
74:I[95276,["/_next/static/chunks/1c8dd1e98f29bd04.js","/_next/static/chunks/de15131553ab167d.js"],"OutletBoundary"]
75:"$Sreact.suspense"
0:{"buildId":"x1Jwpvvf8-JTmhy5NWsQX","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen","children":["$","div",null,{"className":"w-full max-w-4xl mx-auto","children":[["$","$L2",null,{"items":[{"id":"sse-llm-스트리밍의-사실상-표준","text":"SSE: LLM 스트리밍의 사실상 표준","level":2},{"id":"배경","text":"배경","level":2},{"id":"전체-아키텍처","text":"전체 아키텍처","level":2},{"id":"fastapi-프로젝트-구조","text":"FastAPI 프로젝트 구조","level":2},{"id":"sse-스트리밍-엔드포인트","text":"SSE 스트리밍 엔드포인트","level":2},{"id":"sse-이벤트-설계","text":"SSE 이벤트 설계","level":2},{"id":"정상-흐름","text":"정상 흐름","level":3},{"id":"재시도-흐름","text":"재시도 흐름","level":3},{"id":"두-가지-수준의-스트리밍","text":"두 가지 수준의 스트리밍","level":2},{"id":"앱-라이프사이클-관리","text":"앱 라이프사이클 관리","level":2},{"id":"dependency-injection","text":"Dependency Injection","level":2},{"id":"에러-처리","text":"에러 처리","level":2},{"id":"api-엔드포인트-요약","text":"API 엔드포인트 요약","level":2},{"id":"정리","text":"정리","level":2}]}],["$","$L3",null,{"href":"/posts","className":"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left w-4 h-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],["$","span",null,{"children":"포스트 목록으로 돌아가기"}]]}],["$","header",null,{"className":"border-b border-border pb-6 mb-8","children":[["$","h1",null,{"className":"text-2xl sm:text-3xl font-bold text-foreground mb-4","children":"FastAPI + LangGraph로 AI 생성 과정 SSE 스트리밍하기"}],["$","div",null,{"className":"flex flex-wrap items-center gap-4 mb-4","children":["$","span",null,{"className":"text-sm text-muted-foreground","children":"2026-02-12"}]}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","div","FastAPI",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","children":"FastAPI"}],["$","div","SSE",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","children":"SSE"}],["$","div","LangGraph",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","children":"LangGraph"}],["$","div","Streaming",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","children":"Streaming"}],["$","div","Python",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","children":"Python"}]]}]]}],["$","article",null,{"className":"prose prose-neutral dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"fastapi--langgraph로-ai-생성-과정-sse-스트리밍하기","children":"FastAPI + LangGraph로 AI 생성 과정 SSE 스트리밍하기","className":"text-4xl font-bold mt-10 mb-5 text-foreground"}],"\n",["$","h2",null,{"id":"sse-llm-스트리밍의-사실상-표준","children":"SSE: LLM 스트리밍의 사실상 표준","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}],"\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37"]}],"$L38"]}]}],["$L39","$L3a","$L3b","$L3c","$L3d","$L3e","$L3f","$L40","$L41"],"$L42"]}],"loading":null,"isPartial":false}
4:["$","p",null,{"children":["Server-Sent Events(SSE)는 서버에서 클라이언트로 단방향 실시간 데이터를 전송하는 HTTP 기반 프로토콜이다. WebSocket과 달리 별도의 프로토콜 업그레이드 없이 표준 HTTP 위에서 동작하며, 브라우저의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"EventSource"}]}]}]}]," API로 별도 라이브러리 없이 사용할 수 있다."],"className":"my-5 leading-7 text-foreground/90"}]
5:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"항목","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"SSE","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"WebSocket","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"통신 방향","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"서버 → 클라이언트 (단방향)","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"양방향","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"프로토콜","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"HTTP/HTTPS","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"ws:// / wss:// (프로토콜 업그레이드)","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"자동 재연결","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["내장 (",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"EventSource"}]}]}]}]," 자동 처리)"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"직접 구현 필요","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"로드밸런서","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"표준 HTTP 인프라 그대로","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"WebSocket 지원 설정 필요","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"브라우저 지원","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":[["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"EventSource"}]}]}]}]," 내장"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":[["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"WebSocket"}]}]}]}]," 내장"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]]}]]}]}]
6:["$","p",null,{"children":["2025년 AI 생태계에서 SSE는 LLM 토큰 스트리밍의 ",["$","strong",null,{"children":"사실상 표준","className":"font-semibold text-foreground"}],"이 되었다. OpenAI, Anthropic, Google 등 주요 AI API가 모두 SSE 기반 스트리밍을 제공한다. \"사용자가 요청하면, 서버가 토큰을 흘려보낸다\"는 단방향 패턴에 SSE가 정확히 맞기 때문이다. WebSocket의 양방향 기능은 LLM 스트리밍에서는 불필요한 복잡성이며, 커넥션 풀링, 재시도, 로드밸런싱 등 운영 부담이 크다."],"className":"my-5 leading-7 text-foreground/90"}]
7:["$","p",null,{"children":["이 글에서는 FastAPI의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"sse-starlette"}]}]}]}],"과 LangGraph의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"astream"}]}]}]}],"을 결합하여, 멀티 에이전트 워크플로우의 진행 상황을 실시간으로 전달하는 SSE 스트리밍 구조를 설계한 과정을 정리한다."],"className":"my-5 leading-7 text-foreground/90"}]
8:["$","h2",null,{"id":"배경","children":"배경","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
9:["$","p",null,{"children":"디자인 템플릿 AI 생성 시스템의 워크플로우는 성공 시 ~17-22초, 재시도 포함 시 ~30초 이상 소요된다. 5개 에이전트(Orchestrator → Retriever → Analyzer → Generator → Validator)가 순차적으로 실행되는 구조이기 때문이다.","className":"my-5 leading-7 text-foreground/90"}]
a:["$","p",null,{"children":"사용자에게 \"로딩 중...\" 하나만 보여주면 체감 대기 시간이 길다. 각 에이전트의 진행 상황을 실시간으로 보여주면 훨씬 나은 경험이 된다. WebSocket 대신 **SSE(Server-Sent Events)**를 선택한 이유는, 서버 → 클라이언트 단방향 스트리밍만 필요하고 구현이 단순하기 때문이다.","className":"my-5 leading-7 text-foreground/90"}]
b:["$","h2",null,{"id":"전체-아키텍처","children":"전체 아키텍처","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
c:["$","$L43",null,{"chart":"sequenceDiagram\n    participant C as Client (Next.js)\n    participant B as Backend (Next.js API)\n    participant A as AI Server (FastAPI)\n\n    C->>B: POST /api/generate\n    B->>A: POST /api/generate/stream\n    Note right of A: LangGraph 워크플로우 시작\n    A-->>B: SSE: agent_start\n    B-->>C: SSE: agent_start\n    A-->>B: SSE: agent_complete\n    B-->>C: SSE: agent_complete\n    Note over A: ... (단계 반복)\n    A-->>B: SSE: result\n    B-->>C: SSE: result"}]
d:["$","p",null,{"children":["Backend는 AI 서버의 SSE 스트림을 ",["$","strong",null,{"children":"그대로 릴레이","className":"font-semibold text-foreground"}],"한다. 직접 이벤트를 생성하지 않고, AI 서버의 응답 body를 클라이언트에 투명하게 전달하는 구조다."],"className":"my-5 leading-7 text-foreground/90"}]
e:["$","h2",null,{"id":"fastapi-프로젝트-구조","children":"FastAPI 프로젝트 구조","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
f:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"plaintext","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"src/ai_agent/"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── main.py              # FastAPI 앱 팩토리"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── config.py            # pydantic-settings 환경 설정"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── api/"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"│   ├── generate.py      # POST /api/generate/stream (SSE)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"│   ├── search.py        # GET /api/search/similar"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"│   └── health.py        # GET /health"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── schemas/"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"│   └── generate.py      # Pydantic 요청/응답 모델"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── llm/                 # LLM 클라이언트"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── agents/              # 에이전트 구현"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"├── db/                  # DB 접근 (asyncpg)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"└── workflow/            # LangGraph 워크플로우"}]}]]}]}],"className":"not-prose my-6"}]
10:["$","p",null,{"children":"FastAPI를 선택한 이유:","className":"my-5 leading-7 text-foreground/90"}]
11:["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"비동기 네이티브","className":"font-semibold text-foreground"}],": LLM API, DB 쿼리 등 I/O 작업을 async/await로 병렬 처리"],"className":"text-foreground/90 leading-7"}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"AI/ML 생태계","className":"font-semibold text-foreground"}],": Python 기반으로 LangGraph, Anthropic SDK, OpenAI SDK와 자연스럽게 통합"],"className":"text-foreground/90 leading-7"}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Pydantic 통합","className":"font-semibold text-foreground"}],": 요청/응답 스키마의 자동 검증과 OpenAPI 문서 생성"],"className":"text-foreground/90 leading-7"}],"\n"],"className":"my-5 ml-6 list-disc space-y-2"}]
12:["$","h2",null,{"id":"sse-스트리밍-엔드포인트","children":"SSE 스트리밍 엔드포인트","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
13:["$","p",null,{"children":["LangGraph의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"astream(stream_mode=\"updates\")"}]}]}]}],"과 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"sse-starlette"}]}]}]}],"을 결합한다."],"className":"my-5 leading-7 text-foreground/90"}]
14:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" json"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"from"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" fastapi "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" APIRouter"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"from"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" sse_starlette.sse "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" EventSourceResponse"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"router "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" APIRouter()"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"NODE_TO_STAGE"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"    \"orchestrate\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"orchestrating\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"    \"retrieve\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"retrieving\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"    \"analyze\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"analyzing\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"    \"generate\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"generating\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"    \"validate\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"validating\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}],"\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65"]}]}],"className":"not-prose my-6"}]
15:["$","p",null,{"children":[["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"astream(stream_mode=\"updates\")"}]}]}]}],"는 각 노드 실행 완료 시마다 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"{노드이름: 상태업데이트}"}]}]}]}]," dict를 yield한다. 이를 SSE 이벤트로 변환하면 된다."],"className":"my-5 leading-7 text-foreground/90"}]
16:["$","h2",null,{"id":"sse-이벤트-설계","children":"SSE 이벤트 설계","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
17:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"이벤트","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"설명","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"데이터","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"agent_start"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"에이전트 단계 시작","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"{ stage: AgentStage }"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"agent_complete"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"에이전트 단계 완료","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"{ stage: AgentStage }"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"result"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"최종 결과","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"{ data: { xml: string } }"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":"$L66"}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],"$L67","$L68"]}]]}]]}]}]
18:["$","p",null,{"children":["5단계 스테이지: ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"orchestrating"}]}]}]}]," → ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"retrieving"}]}]}]}]," → ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"analyzing"}]}]}]}]," → ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"generating"}]}]}]}]," → ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"validating"}]}]}]}]],"className":"my-5 leading-7 text-foreground/90"}]
19:["$","h3",null,{"id":"정상-흐름","children":"정상 흐름","className":"text-2xl font-semibold mt-8 mb-3 text-foreground"}]
1a:["$","$L43",null,{"chart":"sequenceDiagram\n    participant S as Server\n    participant C as Client\n\n    S-->>C: agent_start(orchestrating)\n    S-->>C: agent_complete(orchestrating)\n    S-->>C: agent_start(retrieving)\n    S-->>C: agent_complete(retrieving)\n    S-->>C: agent_start(analyzing)\n    S-->>C: agent_complete(analyzing)\n    S-->>C: agent_start(generating)\n    S-->>C: agent_complete(generating)\n    S-->>C: agent_start(validating)\n    S-->>C: agent_complete(validating)\n    S-->>C: result(xml)"}]
1b:["$","h3",null,{"id":"재시도-흐름","children":"재시도 흐름","className":"text-2xl font-semibold mt-8 mb-3 text-foreground"}]
1c:["$","p",null,{"children":["Validator가 실패하면 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"generate → validate"}]}]}]}]," 루프가 반복된다."],"className":"my-5 leading-7 text-foreground/90"}]
1d:["$","$L43",null,{"chart":"sequenceDiagram\n    participant S as Server\n    participant C as Client\n\n    Note over S,C: ... (이전 단계 생략)\n    S-->>C: agent_complete(validating) — FAIL\n    S-->>C: agent_start(generating) — 재생성\n    S-->>C: agent_complete(generating)\n    S-->>C: agent_start(validating)\n    S-->>C: agent_complete(validating) — PASS\n    S-->>C: result(xml)"}]
1e:["$","h2",null,{"id":"두-가지-수준의-스트리밍","children":"두 가지 수준의 스트리밍","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
1f:["$","p",null,{"children":"이 시스템에는 두 가지 수준의 스트리밍이 존재한다.","className":"my-5 leading-7 text-foreground/90"}]
20:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"수준","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"위치","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"방식","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"용도","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"토큰 스트리밍","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"AI 서버 내부","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["Claude ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"messages.stream()"}]}]}]}]],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"Generator XML 생성 시 토큰 단위 수신","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"에이전트 스트리밍","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"AI 서버 → 클라이언트","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["LangGraph ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"astream()"}]}]}]}]," → SSE"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"에이전트 단계별 진행 상황 표시","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]]}]]}]}]
21:["$","p",null,{"children":["현재는 ",["$","strong",null,{"children":"에이전트 단계 스트리밍","className":"font-semibold text-foreground"}],"만 프론트엔드에 전달한다. 토큰 스트리밍은 AI 서버 내부에서만 사용하며, 향후 Generator의 XML 생성 과정을 실시간으로 보여주는 데 활용할 수 있다."],"className":"my-5 leading-7 text-foreground/90"}]
22:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"# 토큰 스트리밍 (AI 서버 내부)"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" with"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" client.messages.stream("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"    model"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"claude-sonnet-4-5-20250929\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"    max_tokens"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"8192"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"    system"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"system_prompt,"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"    messages"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"[{"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"role\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"user\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"content\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": prompt}],"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"as"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" stream:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" for"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" text "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"in"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" stream.text_stream:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        yield"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" text"}]]}]]}]}],"className":"not-prose my-6"}]
23:["$","h2",null,{"id":"앱-라이프사이클-관리","children":"앱 라이프사이클 관리","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
24:["$","p",null,{"children":"DB 풀 초기화/정리를 FastAPI의 lifespan 컨텍스트로 관리한다.","className":"my-5 leading-7 text-foreground/90"}]
25:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"from"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" contextlib "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" asynccontextmanager"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"from"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" fastapi "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" FastAPI"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"@asynccontextmanager"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" lifespan"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(app: FastAPI):"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    try"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        await"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" init_pool()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    except"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" Exception"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" as"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" e:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        logger.warning("}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"DB 연결 실패 (DB 없이 기동): "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"%s"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", e)"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    yield"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    await"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" close_pool()"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"app "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" FastAPI("}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"title"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"AI Agent\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"version"}],"$L69","$L6a","$L6b","$L6c","$L6d","$L6e"]}]]}]}],"className":"not-prose my-6"}]
26:["$","p",null,{"children":["DB 연결이 실패해도 경고만 출력하고 정상 기동한다. XML 검증(",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/validate"}]}]}]}],")처럼 DB가 필요 없는 엔드포인트는 계속 동작할 수 있기 때문이다."],"className":"my-5 leading-7 text-foreground/90"}]
27:["$","h2",null,{"id":"dependency-injection","children":"Dependency Injection","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
28:["$","p",null,{"children":["FastAPI의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"Depends()"}]}]}]}],"로 DB pool, LLM client를 주입한다. 테스트 시 mock으로 교체할 수 있다."],"className":"my-5 leading-7 text-foreground/90"}]
29:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" get_pool"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"():"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" pool"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"@router.get"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"/api/search/similar\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" search_similar"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    q: "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"str"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    top_k: "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"int"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" 5"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    pool"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"Depends(get_pool),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"):"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    embedding "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" await"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" create_embedding(q)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    results "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" await"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" search_similar_templates(pool, embedding, "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"top_k"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"top_k)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],"$L6f"]}]]}]}],"className":"not-prose my-6"}]
2a:["$","p",null,{"children":"테스트에서 의존성 교체:","className":"my-5 leading-7 text-foreground/90"}]
2b:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"app.dependency_overrides[get_pool] "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" lambda"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": mock_pool"}]]}]}]}],"className":"not-prose my-6"}]
2c:["$","h2",null,{"id":"에러-처리","children":"에러 처리","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
2d:["$","p",null,{"children":["워크플로우 실행 중 에러 발생 시 SSE ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"error"}]}]}]}]," 이벤트로 프론트엔드에 전달한다."],"className":"my-5 leading-7 text-foreground/90"}]
2e:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" event_generator"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"():"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    try"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" for"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" chunk "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"in"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" compiled.astream(initial_state, "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"stream_mode"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"updates\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"):"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"            # ... 정상 처리"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"            pass"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    except"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" Exception"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" as"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" e:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        yield"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"data\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": json.dumps({"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"type\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"error\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"message\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"str"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(e)})}"}]]}]]}]}],"className":"not-prose my-6"}]
2f:["$","p",null,{"children":"전역 에러 핸들러도 설정한다.","className":"my-5 leading-7 text-foreground/90"}]
30:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"python","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"python","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"@app.exception_handler"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"Exception"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" global_exception_handler"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(request, exc):"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    logger.error("}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"f"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"Unhandled error: "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"{"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"exc"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"}"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"exc_info"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"True"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" JSONResponse("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"        status_code"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"500"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"        content"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"{"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"detail\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"내부 서버 오류가 발생했습니다\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"},"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"    )"}]}]]}]}],"className":"not-prose my-6"}]
31:["$","h2",null,{"id":"api-엔드포인트-요약","children":"API 엔드포인트 요약","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
32:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"메서드","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"경로","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"설명","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"필요 인프라","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"GET","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/health"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"헬스체크","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"없음","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"POST","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/validate"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"XML 유효성 검증","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"없음","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"POST","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/analyze"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"XML 패턴 분석","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"Claude API","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"GET","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/search/similar"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],"$L70","$L71"]}],"$L72"]}]]}]}]
33:["$","p",null,{"children":["외부 인프라 의존도에 따라 엔드포인트를 분리했다. ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/health"}]}]}]}],"와 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/validate"}]}]}]}],"는 외부 의존 없이 동작하므로, 모니터링과 테스트에 유용하다."],"className":"my-5 leading-7 text-foreground/90"}]
34:["$","h2",null,{"id":"정리","children":"정리","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
35:["$","p",null,{"children":"FastAPI + LangGraph SSE 스트리밍 구조에서 핵심적인 설계 결정 세 가지:","className":"my-5 leading-7 text-foreground/90"}]
36:["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"Backend는 릴레이만 한다","className":"font-semibold text-foreground"}],": AI 서버의 SSE 스트림을 Backend가 그대로 중계하는 구조로, SSE 이벤트 생성 로직이 AI 서버에만 존재한다. 관심사 분리가 명확하다."],"className":"my-5 leading-7 text-foreground/90"}],"\n"],"className":"text-foreground/90 leading-7"}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"sse-starlette + astream 조합","className":"font-semibold text-foreground"}],": LangGraph의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"astream(stream_mode=\"updates\")"}]}]}]}],"이 노드 완료 시마다 yield하는 구조와 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"sse-starlette"}]}]}]}],"의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"EventSourceResponse"}]}]}]}],"가 자연스럽게 결합된다."],"className":"my-5 leading-7 text-foreground/90"}],"\n"],"className":"text-foreground/90 leading-7"}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"Lifespan 기반 리소스 관리","className":"font-semibold text-foreground"}],": DB 풀의 초기화/정리를 FastAPI lifespan으로 관리하여, DB 없이도 기동 가능한 유연한 구조를 유지한다."],"className":"my-5 leading-7 text-foreground/90"}],"\n"],"className":"text-foreground/90 leading-7"}],"\n"],"className":"my-5 ml-6 list-decimal space-y-2"}]
37:["$","p",null,{"children":"~20초의 AI 생성 과정을 5단계로 나누어 실시간으로 보여주는 것만으로도, 사용자 체감 대기 시간이 크게 줄어든다.","className":"my-5 leading-7 text-foreground/90"}]
38:["$","$L73",null,{}]
39:["$","script","script-0",{"src":"/_next/static/chunks/b59c211883e2cc85.js","async":true}]
3a:["$","script","script-1",{"src":"/_next/static/chunks/62ae5b2571fdfa58.js","async":true}]
3b:["$","script","script-2",{"src":"/_next/static/chunks/808ed0f189237446.js","async":true}]
3c:["$","script","script-3",{"src":"/_next/static/chunks/d20696d588f50da6.js","async":true}]
3d:["$","script","script-4",{"src":"/_next/static/chunks/0e1982b1a6cbd127.js","async":true}]
3e:["$","script","script-5",{"src":"/_next/static/chunks/2d4c0fd06ca34510.js","async":true}]
3f:["$","script","script-6",{"src":"/_next/static/chunks/ca3512025a981c82.js","async":true}]
40:["$","script","script-7",{"src":"/_next/static/chunks/3d8db013779f38f4.js","async":true}]
41:["$","script","script-8",{"src":"/_next/static/chunks/e63644fc036e8e8f.js","async":true}]
42:["$","$L74",null,{"children":["$","$75",null,{"name":"Next.MetadataOutlet","children":"$@76"}]}]
44:["$","span",null,{"data-line":"","children":" "}]
45:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"@router.post"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"/api/generate/stream\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]]}]
46:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" generate_stream"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(request: GenerateRequest, mock: "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"bool"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" False"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"):"}]]}]
47:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" def"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" event_generator"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"():"}]]}]
48:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        compiled "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" build_graph().compile()"}]]}]
49:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        initial_state "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}]
4a:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"            \"prompt\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": request.prompt,"}]]}]
4b:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"            \"pod_type\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"None"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]
4c:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"            \"retry_count\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"0"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]
4d:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        }"}]}]
4e:["$","span",null,{"data-line":"","children":" "}]
4f:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        async"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" for"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" chunk "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"in"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" compiled.astream("}]]}]
50:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"            initial_state, "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"stream_mode"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"updates\""}]]}]
51:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        ):"}]}]
52:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"            for"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" node_name, state_update "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"in"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" chunk.items():"}]]}]
53:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"                stage "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" NODE_TO_STAGE"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":".get(node_name)"}]]}]
54:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"                if"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" not"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" stage:"}]]}]
55:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"                    continue"}]}]
56:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"                yield"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}]
57:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"                    \"data\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": json.dumps({"}]]}]
58:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"                        \"type\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"agent_complete\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]
59:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"                        \"stage\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": stage,"}]]}]
5a:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"                    })"}]}]
5b:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"                }"}]}]
5c:["$","span",null,{"data-line":"","children":" "}]
5d:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"        # 최종 결과"}]}]
5e:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"        yield"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}]
5f:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"            \"data\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": json.dumps({"}]]}]
60:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"                \"type\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"result\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]
61:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"                \"data\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": {"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"xml\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":": state_update.get("}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"generated_xml\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":")},"}]]}]
62:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"            })"}]}]
63:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"        }"}]}]
64:["$","span",null,{"data-line":"","children":" "}]
65:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" EventSourceResponse(event_generator())"}]]}]
66:["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"error"}]}]}]
67:["$","td",null,{"children":"오류 발생","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]
68:["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"{ message: string }"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]
69:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}]
6a:["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"0.1.0\""}]
6b:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}]
6c:["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"lifespan"}]
6d:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}]
6e:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"lifespan)"}]
6f:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" results"}]
70:["$","td",null,{"children":"유사 템플릿 검색","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]
71:["$","td",null,{"children":"DB + OpenAI","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]
72:["$","tr",null,{"children":[["$","td",null,{"children":"POST","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/api/generate/stream"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"템플릿 생성 (SSE)","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"모두","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]
76:null
