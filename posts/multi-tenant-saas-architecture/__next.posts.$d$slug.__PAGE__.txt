1:"$Sreact.fragment"
2:I[66627,["/_next/static/chunks/032ac46945970232.js","/_next/static/chunks/536feedbaa84dae8.js","/_next/static/chunks/fec9c5c27cbc91d6.js","/_next/static/chunks/bf98b467f5036c3d.js","/_next/static/chunks/948615c9ecde1cb4.js","/_next/static/chunks/c84805df17f0a72a.js","/_next/static/chunks/0e5a02cd06292d2b.js","/_next/static/chunks/85806e5b63a62879.js","/_next/static/chunks/f87ca1afb6e89cb0.js","/_next/static/chunks/311bfda68bef2673.js","/_next/static/chunks/e1a9aaa3e8d4ba89.js","/_next/static/chunks/8fba60bd4135542a.js"],"TableOfContents"]
3:I[51506,["/_next/static/chunks/032ac46945970232.js","/_next/static/chunks/536feedbaa84dae8.js","/_next/static/chunks/fec9c5c27cbc91d6.js","/_next/static/chunks/bf98b467f5036c3d.js","/_next/static/chunks/948615c9ecde1cb4.js","/_next/static/chunks/c84805df17f0a72a.js","/_next/static/chunks/0e5a02cd06292d2b.js","/_next/static/chunks/85806e5b63a62879.js","/_next/static/chunks/f87ca1afb6e89cb0.js","/_next/static/chunks/311bfda68bef2673.js","/_next/static/chunks/e1a9aaa3e8d4ba89.js","/_next/static/chunks/8fba60bd4135542a.js"],""]
41:I[95276,["/_next/static/chunks/221e0744b683f94b.js","/_next/static/chunks/90c5a27ffb71fa4a.js"],"OutletBoundary"]
42:"$Sreact.suspense"
44:I[63508,["/_next/static/chunks/032ac46945970232.js","/_next/static/chunks/536feedbaa84dae8.js","/_next/static/chunks/fec9c5c27cbc91d6.js","/_next/static/chunks/bf98b467f5036c3d.js","/_next/static/chunks/948615c9ecde1cb4.js","/_next/static/chunks/c84805df17f0a72a.js","/_next/static/chunks/0e5a02cd06292d2b.js","/_next/static/chunks/85806e5b63a62879.js","/_next/static/chunks/f87ca1afb6e89cb0.js","/_next/static/chunks/311bfda68bef2673.js","/_next/static/chunks/e1a9aaa3e8d4ba89.js","/_next/static/chunks/8fba60bd4135542a.js"],"Mermaid"]
0:{"buildId":"axnbkR_Z1aBIINA7cu07o","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen bg-[radial-gradient(oklch(0.5_0_0/15%)_1px,transparent_1px)] bg-size-[20px_20px]","children":["$","div",null,{"className":"w-full max-w-4xl mx-auto","children":[["$","$L2",null,{"items":[{"id":"멀티테넌시란","text":"멀티테넌시란","level":2},{"id":"배경","text":"배경","level":2},{"id":"테넌트-식별-3가지-도메인-전략","text":"테넌트 식별: 3가지 도메인 전략","level":2},{"id":"데이터-저장-전략-외부-api-의존","text":"데이터 저장 전략: 외부 API 의존","level":2},{"id":"db-스키마-16개-테이블","text":"DB 스키마: 16개 테이블","level":2},{"id":"3가지-테넌트-타입","text":"3가지 테넌트 타입","level":2},{"id":"고정형-fixed","text":"고정형 (FIXED)","level":3},{"id":"자유형-flexible","text":"자유형 (FLEXIBLE)","level":3},{"id":"생성형-generative","text":"생성형 (GENERATIVE)","level":3},{"id":"설정값-정규화-중복을-잡아라","text":"설정값 정규화: 중복을 잡아라","level":2},{"id":"페이지-시스템-8개-타입-동적-네비게이션","text":"페이지 시스템: 8개 타입, 동적 네비게이션","level":2},{"id":"마무리","text":"마무리","level":2}]}],["$","$L3",null,{"href":"/posts","className":"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left w-4 h-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],["$","span",null,{"children":"포스트 목록으로 돌아가기"}]]}],["$","div",null,{"className":"rounded-lg border border-border bg-card text-card-foreground shadow-sm mb-8","children":["$","div",null,{"className":"p-6 pt-6","children":[["$","h1",null,{"className":"text-3xl sm:text-4xl font-bold text-foreground mb-4","children":"멀티테넌트 SaaS 아키텍처 설계기 — 자사 팝업 스토어"}],["$","div",null,{"className":"flex flex-wrap items-center gap-4 mb-4","children":["$","div",null,{"className":"flex items-center gap-2 text-muted-foreground","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar w-4 h-4","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2026-01-12"}]]}]}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","div","Architecture",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary-sky/20 text-primary-sky","children":"Architecture"}],["$","div","Multi-tenant",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary-sky/20 text-primary-sky","children":"Multi-tenant"}],["$","div","Next.js",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary-sky/20 text-primary-sky","children":"Next.js"}],["$","div","Prisma",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary-sky/20 text-primary-sky","children":"Prisma"}],["$","div","SaaS",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary-sky/20 text-primary-sky","children":"SaaS"}]]}]]}]}],["$","article",null,{"className":"prose prose-neutral dark:prose-invert max-w-none","children":"$L4"}]]}]}],["$L5","$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld"],"$Le"]}],"loading":null,"isPartial":false}
4:[["$","h1",null,{"id":"멀티테넌트-saas-아키텍처-설계기","children":"멀티테넌트 SaaS 아키텍처 설계기","className":"text-4xl font-bold mt-10 mb-5 text-foreground"}],"\n",["$","h2",null,{"id":"멀티테넌시란","children":"멀티테넌시란","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}],"\n",["$","p",null,{"children":"멀티테넌시(Multi-tenancy)는 하나의 소프트웨어 인스턴스가 여러 테넌트(고객 조직)에 서비스를 제공하는 아키텍처다. AWS Well-Architected SaaS Lens에서는 테넌트 격리 모델을 세 가지로 분류한다.","className":"my-5 leading-7 text-foreground/90"}],"\n",["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"모델","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"데이터 격리","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"비용","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"적합한 상황","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":[["$","strong",null,{"children":"Silo","className":"font-semibold text-foreground"}]," (사일로)"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"테넌트별 독립 DB 인스턴스","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"높음","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"법적 규제가 엄격한 금융/의료","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":[["$","strong",null,{"children":"Pool","className":"font-semibold text-foreground"}]," (풀)"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"공유 DB + Row-Level Security","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"낮음","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"대규모 SaaS, 비용 최적화","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":[["$","strong",null,{"children":"Bridge","className":"font-semibold text-foreground"}]," (브릿지)"],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"공유 DB + 테넌트별 스키마","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"중간","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"엔터프라이즈 SaaS (가장 보편적)","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]]}]]}]}],"\n",["$","p",null,{"children":"실제 SaaS에서는 세 모델이 혼합되어 사용된다. Shopify는 상품·주문 같은 핵심 데이터는 Pool 모델(공유 DB + 테넌트 ID)로, 결제·인증 같은 민감 데이터는 Silo 모델로 운영한다. 이런 혼합 방식이 Bridge 모델의 본질이며, 보안과 비용 사이의 균형을 잡는 것이 멀티테넌트 설계의 핵심 과제다.","className":"my-5 leading-7 text-foreground/90"}],"\n",["$","p",null,{"children":["이 글에서는 팝업 스토어 플랫폼의 멀티테넌트 아키텍처를 Pool 모델(",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":"$Lf"}]}]," 외래키 기반) 중심으로 설계한 과정을 정리한다."],"className":"my-5 leading-7 text-foreground/90"}],"\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40"]
5:["$","script","script-0",{"src":"/_next/static/chunks/bf98b467f5036c3d.js","async":true}]
6:["$","script","script-1",{"src":"/_next/static/chunks/948615c9ecde1cb4.js","async":true}]
7:["$","script","script-2",{"src":"/_next/static/chunks/c84805df17f0a72a.js","async":true}]
8:["$","script","script-3",{"src":"/_next/static/chunks/0e5a02cd06292d2b.js","async":true}]
9:["$","script","script-4",{"src":"/_next/static/chunks/85806e5b63a62879.js","async":true}]
a:["$","script","script-5",{"src":"/_next/static/chunks/f87ca1afb6e89cb0.js","async":true}]
b:["$","script","script-6",{"src":"/_next/static/chunks/311bfda68bef2673.js","async":true}]
c:["$","script","script-7",{"src":"/_next/static/chunks/e1a9aaa3e8d4ba89.js","async":true}]
d:["$","script","script-8",{"src":"/_next/static/chunks/8fba60bd4135542a.js","async":true}]
e:["$","$L41",null,{"children":["$","$42",null,{"name":"Next.MetadataOutlet","children":"$@43"}]}]
f:["$","span",null,{"data-line":"","children":["$","span",null,{"children":"tenantId"}]}]
10:["$","h2",null,{"id":"배경","children":"배경","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
11:["$","p",null,{"children":"팝업 스토어 플랫폼을 만들면서, 업체(테넌트)별로 완전히 독립된 온라인 스토어를 운영할 수 있는 시스템이 필요했다. 단순히 데이터만 분리하는 것이 아니라, 테넌트마다 도메인, 테마, 페이지 레이아웃, 약관, 폰트까지 커스터마이징할 수 있어야 했다.","className":"my-5 leading-7 text-foreground/90"}]
12:["$","p",null,{"children":"여기에 기존 DPS(디자인플러그) API와 연동하여 상품·주문 정보를 실시간으로 동기화해야 하는 요구사항도 있었다. 이 글에서는 이 시스템의 멀티테넌트 아키텍처를 어떻게 설계했는지 정리한다.","className":"my-5 leading-7 text-foreground/90"}]
13:["$","h2",null,{"id":"테넌트-식별-3가지-도메인-전략","children":"테넌트 식별: 3가지 도메인 전략","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
14:["$","p",null,{"children":"멀티테넌트 시스템의 첫 번째 과제는 \"요청이 어느 테넌트의 것인지 어떻게 알 것인가\"다. 세 가지 접근 방식을 지원하기로 했다.","className":"my-5 leading-7 text-foreground/90"}]
15:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"방식","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"예시","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"특징","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"경로","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"store.example.com/acme"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"가장 간단, 기본 제공","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"서브도메인","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"acme.mystore.app"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"테넌트별 독립 URL","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"커스텀 도메인","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"shop.acme.com"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"테넌트가 직접 등록","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]]}]]}]}]
16:["$","p",null,{"children":"이를 Prisma 스키마에서는 다음과 같이 표현했다.","className":"my-5 leading-7 text-foreground/90"}]
17:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"prisma","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"prisma","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"model"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" Tenant"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  tenantName "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"String"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"  @unique"}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"  // 경로/서브도메인 식별"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  domain     "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"String"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" @unique"}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"  // 커스텀 도메인 식별"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}],"className":"not-prose my-6"}]
18:["$","p",null,{"children":["Next.js 16의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"proxy.ts"}]}]}]}],"에서 Host 헤더를 분석하여 서브도메인과 커스텀 도메인 요청을 경로 기반으로 rewrite한다. 이렇게 하면 애플리케이션 내부에서는 항상 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"/[tenant]/..."}]}]}]}]," 경로 패턴으로 통일되어 처리할 수 있다."],"className":"my-5 leading-7 text-foreground/90"}]
19:["$","h2",null,{"id":"데이터-저장-전략-외부-api-의존","children":"데이터 저장 전략: 외부 API 의존","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
1a:["$","p",null,{"children":"이 시스템의 가장 큰 특징은 상품·주문 정보를 자체 DB에 저장하지 않는다는 점이다.","className":"my-5 leading-7 text-foreground/90"}]
1b:["$","$L44",null,{"chart":"flowchart LR\n  Client[클라이언트] <--> Store[DPS Store]\n  Store <--> API[DPS API]\n  Store <--> DB[&quot;MariaDB\\n(설정/참조 정보만)&quot;]"}]
1c:["$","p",null,{"children":"DB에는 테넌트 설정, 페이지 레이아웃, 고객 정보, 장바구니, 주문 메타데이터만 저장하고, 상품명·가격·이미지 같은 실제 상품 정보는 DPS API에서 실시간으로 조회한다.","className":"my-5 leading-7 text-foreground/90"}]
1d:["$","p",null,{"children":"단, 주문 시점의 상품명과 가격은 스냅샷으로 저장한다. 나중에 상품 정보가 바뀌더라도 주문 당시의 정보를 보존하기 위해서다.","className":"my-5 leading-7 text-foreground/90"}]
1e:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"prisma","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"prisma","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"model"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" OrderItem"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  dpsProductSeqno "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"Int"}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"     // DPS 상품 참조키"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  productName     "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"String"}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"  // 주문 시점 스냅샷"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  unitPrice       "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"Int"}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"     // 주문 시점 스냅샷"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}],"className":"not-prose my-6"}]
1f:["$","h2",null,{"id":"db-스키마-16개-테이블","children":"DB 스키마: 16개 테이블","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
20:["$","p",null,{"children":"전체 스키마는 16개 테이블로 구성된다. 핵심 관계를 요약하면 다음과 같다.","className":"my-5 leading-7 text-foreground/90"}]
21:["$","$L44",null,{"chart":"graph TD\n  Tenant[Tenant 테넌트]\n  Tenant --> Theme[Theme 테마]\n  Tenant --> Page[Page 페이지]\n  Page --> PageFile[PageFile N:N]\n  Tenant --> Product[Product 상품 설정]\n  Product --> ProductCategory[ProductCategory N:N]\n  Product --> ProductDisplay[ProductDisplay N:N]\n  Tenant --> Category[Category 카테고리]\n  Tenant --> Display[Display 전시]\n  Tenant --> Terms[Terms 약관]\n  Tenant --> TenantFont[TenantFont N:N]\n  Tenant --> Cart[Cart 장바구니]\n  Cart --> CartItem[CartItem]\n  Tenant --> Order[Order 주문]\n  Order --> OrderItem[OrderItem]\n  Tenant --> File[File 파일]\n\n  Customer[Customer 고객]\n  Customer --> Cart\n  Customer --> Order\n  Customer --> CustomerConsent[CustomerConsent 약관 동의]"}]
22:["$","p",null,{"children":["테넌트별 데이터 격리는 모든 주요 테이블에 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"tenantId"}]}]}]}]," 외래키를 통해 구현했다."],"className":"my-5 leading-7 text-foreground/90"}]
23:["$","h2",null,{"id":"3가지-테넌트-타입","children":"3가지 테넌트 타입","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
24:["$","p",null,{"children":"테넌트가 스토어 페이지를 구성하는 방식을 세 가지로 분류했다.","className":"my-5 leading-7 text-foreground/90"}]
25:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"prisma","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"prisma","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"enum"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" TenantType"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  FIXED      "}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// 고정형: 미리 정의된 레이아웃"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  FLEXIBLE   "}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// 자유형: 노드 기반 비주얼 빌더"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  GENERATIVE "}],["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// 생성형: AI 자동 생성 (준비 중)"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}],"className":"not-prose my-6"}]
26:["$","h3",null,{"id":"고정형-fixed","children":"고정형 (FIXED)","className":"text-2xl font-semibold mt-8 mb-3 text-foreground"}]
27:["$","p",null,{"children":["미리 정의된 레이아웃 구조 위에 콘텐츠와 스타일만 커스터마이징하는 방식이다. 각 페이지의 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"layoutConfig"}]}]}]}],"(JSON)에 텍스트, 이미지, 표시 여부 등을 설정하고, ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"styleConfig"}]}]}]}],"(JSON)에 색상, 크기 등 스타일을 설정한다."],"className":"my-5 leading-7 text-foreground/90"}]
28:["$","p",null,{"children":"요소의 배치 순서나 섹션 구조는 코드에서 고정되어 있으므로, 비개발자도 쉽게 스토어를 구성할 수 있다.","className":"my-5 leading-7 text-foreground/90"}]
29:["$","h3",null,{"id":"자유형-flexible","children":"자유형 (FLEXIBLE)","className":"text-2xl font-semibold mt-8 mb-3 text-foreground"}]
2a:["$","p",null,{"children":["노드 기반 비주얼 빌더로 페이지를 자유롭게 구성하는 방식이다. ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"layoutConfig"}]}]}]}],"에 UINode 트리를 JSON으로 저장하며, WYSIWYG 에디터에서 드래그앤드롭으로 편집한다."],"className":"my-5 leading-7 text-foreground/90"}]
2b:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// v2.0 노드 기반 레이아웃"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"interface"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" NodeLayoutConfig"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  rootNode"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" UINode"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  metadata"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" { "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"version"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"2.0\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" };"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}],"className":"not-prose my-6"}]
2c:["$","p",null,{"children":["렌더링 시에는 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"FlexiblePageRenderer"}]}]}]}],"에서 자동으로 버전을 감지하여 적절한 렌더러를 사용한다."],"className":"my-5 leading-7 text-foreground/90"}]
2d:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"if"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"isNodeLayoutConfig"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(layoutConfig)) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" <"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"RootNodeRenderer"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" config"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"={"}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"layoutConfig"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"} />;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}],"className":"not-prose my-6"}]
2e:["$","h3",null,{"id":"생성형-generative","children":"생성형 (GENERATIVE)","className":"text-2xl font-semibold mt-8 mb-3 text-foreground"}]
2f:["$","p",null,{"children":"AI가 브랜드와 니즈에 맞게 페이지를 자동 생성하는 방식으로, 현재 준비 중이다.","className":"my-5 leading-7 text-foreground/90"}]
30:["$","h2",null,{"id":"설정값-정규화-중복을-잡아라","children":"설정값 정규화: 중복을 잡아라","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
31:["$","p",null,{"children":"8개 페이지 타입을 구현하다 보니 설정값 중복이 심각해졌다. 배송비 정책은 CART와 ORDER_FORM에 중복되고, 디바이스 스케일은 모든 페이지에 반복되었다.","className":"my-5 leading-7 text-foreground/90"}]
32:["$","p",null,{"children":"이를 해결하기 위해 설정값을 3계층으로 분리했다.","className":"my-5 leading-7 text-foreground/90"}]
33:["$","div",null,{"className":"my-8 overflow-x-auto bg-card rounded-lg border border-border","children":["$","table",null,{"className":"w-full border-collapse","children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"계층","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"저장 위치","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}],["$","th",null,{"children":"항목","className":"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0"}]]}],"className":"bg-muted"}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"정책","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"Tenant.policyConfig"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"배송비 정책, 주문 흐름, 인증/약관 정책","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"공통 스타일","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"Theme.commonStyleConfig"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"로고 크기, 배경색, 디바이스 스케일, 버튼 스타일","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"페이지별","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"Page.layoutConfig/styleConfig"}]}]}]}],"className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}],["$","td",null,{"children":"텍스트, 이미지, 페이지 고유 스타일","className":"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&]:border-b-0"}]]}]]}]]}]}]
34:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"interface"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" TenantPolicyConfig"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  deliveryPolicy"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"combined\""}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"individual\""}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"free\""}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"freeOver\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  freeDeliveryThreshold"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" number"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  afterAddAction"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"ask\""}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"cart\""}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"},"children":" \"order\""}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  showShippingForm"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" boolean"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  requireVerification"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" boolean"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  sessionTimeout"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" number"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"interface"}],"$L45","$L46"]}],"\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c"]}]}],"className":"not-prose my-6"}]
35:["$","p",null,{"children":["페이지별 스타일에서 공통 스타일을 참조할 때는 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark github-light","style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"useDefault"}]}]}]}]," 플래그를 사용한다."],"className":"my-5 leading-7 text-foreground/90"}]
36:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// useResolvedBackground 훅"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"if"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" (styleConfig.useDefaultBackground) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" commonStyleConfig.defaultBackgroundColor;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" styleConfig.backgroundColor;"}]]}]]}]}],"className":"not-prose my-6"}]
37:["$","p",null,{"children":"이 패턴으로 중복 설정을 제거하면서도, 필요한 경우 페이지별로 오버라이드할 수 있는 유연성을 유지했다.","className":"my-5 leading-7 text-foreground/90"}]
38:["$","h2",null,{"id":"페이지-시스템-8개-타입-동적-네비게이션","children":"페이지 시스템: 8개 타입, 동적 네비게이션","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
39:["$","p",null,{"children":"스토어의 고객 플로우를 8개 페이지 타입으로 정의했다.","className":"my-5 leading-7 text-foreground/90"}]
3a:["$","$L44",null,{"chart":"flowchart LR\n  HERO --> SIGNUP --> PRODUCT_LIST --> OPTION_SELECT --> CART --> ORDER_FORM --> ORDER_RESULT --> MY_PAGE"}]
3b:["$","p",null,{"children":"각 페이지는 활성화/비활성화가 가능하며, 비활성화된 페이지는 자동으로 건너뛴다. 예를 들어 CART를 비활성화하면 상품 선택 후 바로 주문으로 넘어가는 빠른 주문 플로우가 된다.","className":"my-5 leading-7 text-foreground/90"}]
3c:["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"--shiki-dark":"#e1e4e8","--shiki-light":"#24292e","--shiki-dark-bg":"#24292e","--shiki-light-bg":"#fff"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark github-light","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"},"children":"// lib/navigation/page-flow.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" getNextPage"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"current"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" PageType"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"activePages"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" Set"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"<"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"PageType"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":">)"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" PageType"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  const"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" flow"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" ["}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"HERO"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"SIGNUP"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"PRODUCT_LIST"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"OPTION_SELECT"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"CART"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"ORDER_FORM"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"ORDER_RESULT"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"];"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  const"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" currentIndex"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" flow."}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"indexOf"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(current);"}]]}],"\n",["$","span",null,{"data-line":"","children":["$L4d","$L4e","$L4f","$L50","$L51","$L52","$L53","$L54","$L55","$L56","$L57","$L58","$L59","$L5a","$L5b"]}],"\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f"]}]}],"className":"not-prose my-6"}]
3d:["$","h2",null,{"id":"마무리","children":"마무리","className":"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2"}]
3e:["$","p",null,{"children":"이 아키텍처의 핵심은 \"테넌트별 격리\"와 \"유연한 커스터마이징\" 사이의 균형이다. 도메인 식별, 데이터 저장, 페이지 구성, 설정 관리 각 영역에서 테넌트의 독립성을 보장하면서도, 공통 로직은 재사용할 수 있는 구조를 만들었다.","className":"my-5 leading-7 text-foreground/90"}]
3f:["$","p",null,{"children":"외부 API 의존 전략은 데이터 일관성 유지에 신경 쓸 부분이 있지만, 상품 정보를 이중으로 관리할 필요가 없어 시스템이 훨씬 간결해졌다. 주문 시점 스냅샷과 양방향 동기화로 데이터 정합성 문제를 해결했다.","className":"my-5 leading-7 text-foreground/90"}]
40:["$","p",null,{"children":"설정값 정규화는 처음부터 설계하기보다, 구현하면서 중복을 발견하고 3계층으로 분리하는 과정을 거쳤다. \"일단 만들고, 패턴을 발견하면 정리한다\"는 접근이 실용적이었다.","className":"my-5 leading-7 text-foreground/90"}]
43:null
45:["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" CommonStyleConfig"}]
46:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]
47:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  logoSizePreset"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" LogoSizePreset"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
48:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  defaultBackgroundColor"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" string"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
49:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  deviceScale"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" DeviceScale"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
4a:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  primaryButton"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" ButtonStyleConfig"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
4b:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#FFAB70","--shiki-light":"#E36209"},"children":"  headerIcon"}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"?:"}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":" HeaderIconStyle"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
4c:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]
4d:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  for"}]
4e:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}]
4f:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"let"}]
50:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" i "}]
51:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"="}]
52:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" currentIndex "}]
53:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"+"}]
54:["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" 1"}]
55:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"; i "}]
56:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"<"}]
57:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" flow."}]
58:["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":"length"}]
59:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"; i"}]
5a:["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"++"}]
5b:["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":") {"}]
5c:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"    if"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" (activePages."}],["$","span",null,{"style":{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"},"children":"has"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"(flow[i])) "}],["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":" flow[i];"}]]}]
5d:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"  }"}]}]
5e:["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"},"children":"  return"}],["$","span",null,{"style":{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"},"children":" ORDER_RESULT"}],["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]
5f:["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]
