<!DOCTYPE html><!--tIT0igUXZ6FsgoL1k_h3j--><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/fonts/PretendardVariable-subset.woff2" as="font" crossorigin="anonymous" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/f530ac11b30b3af0.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/bb3d3f0f00f8c26b.js"/><script src="/_next/static/chunks/965dba060c630c21.js" async=""></script><script src="/_next/static/chunks/e3f6e9c7d91d28be.js" async=""></script><script src="/_next/static/chunks/2a5a9040eca19519.js" async=""></script><script src="/_next/static/chunks/turbopack-eb47450658f9c499.js" async=""></script><script src="/_next/static/chunks/cfc3767bca0bc286.js" async=""></script><script src="/_next/static/chunks/8e14ec824c461f29.js" async=""></script><script src="/_next/static/chunks/1c8dd1e98f29bd04.js" async=""></script><script src="/_next/static/chunks/de15131553ab167d.js" async=""></script><script src="/_next/static/chunks/adc93b9d12c01e00.js" async=""></script><script src="/_next/static/chunks/8d5d30bb3315a01b.js" async=""></script><script src="/_next/static/chunks/77bb2061874ac018.js" async=""></script><script src="/_next/static/chunks/38e38e36e6ce0d91.js" async=""></script><script src="/_next/static/chunks/659198ab3dae4258.js" async=""></script><script src="/_next/static/chunks/99d37ae7b03a4a6d.js" async=""></script><script src="/_next/static/chunks/3d082df2bbbd0a90.js" async=""></script><script src="/_next/static/chunks/4cb06eecdd277427.js" async=""></script><script src="/_next/static/chunks/e4f08b75bcddd08a.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-GMZ6W7F2WX" as="script"/><link rel="preload" href="/fonts/PretendardVariable-subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://img.shields.io"/><link rel="shortcut icon" href="/favicon-light.svg"/><link rel="icon" href="/favicon-light.svg"/><link rel="apple-touch-icon" href="/favicon-light.svg"/><title>100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인 | 안성진</title><meta name="description" content="레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다."/><meta name="keywords" content="ETL,Data Pipeline,pgvector,OpenAI,Python"/><meta name="robots" content="index, follow"/><meta name="google-site-verification" content="kpYkq06WB0cQDLByVOdZD_5HXLkbxzFAvQKQ-Rp9sKY"/><meta property="og:title" content="100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인"/><meta property="og:description" content="레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다."/><meta property="og:url" content="https://anveloper.dev/posts/xml-data-pipeline-for-ai-search"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인"/><meta name="twitter:description" content="레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다."/><script>
  (function() {
    try {
      var theme = localStorage.getItem('theme');
      var valid = ['light', 'dark', 'korean', 'terminal'];
      var root = document.documentElement;
      root.classList.remove('light', 'dark', 'korean', 'terminal');
      if (valid.indexOf(theme) !== -1) {
        root.classList.add(theme);
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        root.classList.add('dark');
      }
    } catch (e) {}
  })();
</script><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="min-h-screen flex flex-col bg-background text-foreground antialiased"><div hidden=""><!--$--><!--/$--></div><main class="flex-1 flex flex-col"><!--$?--><template id="B:0"></template><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader h-11 w-11 absolute m-auto top-0 bottom-0 right-0 left-0 animate-spin text-muted-foreground z-50" aria-hidden="true"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg><!--/$--></main><footer class="border-t border-border"><div class="max-w-4xl mx-auto px-6 sm:px-8 md:px-12 lg:px-16 py-6 flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-muted-foreground"><span>© 2025 anveloper.dev</span><nav class="flex items-center gap-3"><span class="flex items-center gap-3"><a class="hover:text-foreground transition-colors" target="_blank" rel="noopener noreferrer" href="https://github.com/anveloper">GitHub</a></span><span class="flex items-center gap-3"><span aria-hidden="true">·</span><a class="hover:text-foreground transition-colors" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/anveloper">LinkedIn</a></span><span class="flex items-center gap-3"><span aria-hidden="true">·</span><a class="hover:text-foreground transition-colors" href="/contact">Contact</a></span></nav></div></footer><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/bb3d3f0f00f8c26b.js" id="_R_" async=""></script><div hidden id="S:0"><div class="pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen"><div class="w-full max-w-4xl mx-auto"><nav class="hidden xl:block fixed left-[calc(50%+29.5rem)] top-28 w-52 max-h-[calc(100vh-8rem)] overflow-y-auto" aria-label="목차"><p class="text-sm font-semibold text-foreground mb-3">목차</p><ul class="space-y-1.5 border-l border-border"><li><a href="#rag-데이터-파이프라인-비정형-데이터의-etl" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">RAG 데이터 파이프라인: 비정형 데이터의 ETL</a></li><li><a href="#배경" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">배경</a></li><li><a href="#파이프라인-전체-흐름" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">파이프라인 전체 흐름</a></li><li><a href="#1단계-추출-extract" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">1단계: 추출 (Extract)</a></li><li><a href="#2단계-파싱-parse" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">2단계: 파싱 (Parse)</a></li><li><a href="#3단계-메타데이터-추출--하이브리드-전략-transform" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">3단계: 메타데이터 추출 — 하이브리드 전략 (Transform)</a></li><li><a href="#코드-기반-추출-비용-0" class="block text-[13px] leading-snug py-0.5 transition-colors pl-6 text-muted-foreground hover:text-foreground">코드 기반 추출 (비용 $0)</a></li><li><a href="#ai-기반-추출-claude-haiku" class="block text-[13px] leading-snug py-0.5 transition-colors pl-6 text-muted-foreground hover:text-foreground">AI 기반 추출 (Claude Haiku)</a></li><li><a href="#개인정보-마스킹" class="block text-[13px] leading-snug py-0.5 transition-colors pl-6 text-muted-foreground hover:text-foreground">개인정보 마스킹</a></li><li><a href="#임베딩-입력-텍스트-조립" class="block text-[13px] leading-snug py-0.5 transition-colors pl-6 text-muted-foreground hover:text-foreground">임베딩 입력 텍스트 조립</a></li><li><a href="#4단계-임베딩-embed" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">4단계: 임베딩 (Embed)</a></li><li><a href="#5단계-적재-load" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">5단계: 적재 (Load)</a></li><li><a href="#에러-처리-체크포인트와-격리" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">에러 처리: 체크포인트와 격리</a></li><li><a href="#단계별-비용" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">단계별 비용</a></li><li><a href="#정리" class="block text-[13px] leading-snug py-0.5 transition-colors pl-3 text-muted-foreground hover:text-foreground">정리</a></li></ul></nav><a class="inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6" href="/posts"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg><span>포스트 목록으로 돌아가기</span></a><header class="border-b border-border pb-6 mb-8"><h1 class="text-2xl sm:text-3xl font-bold text-foreground mb-4">100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인</h1><div class="flex flex-wrap items-center gap-4 mb-4"><span class="text-sm text-muted-foreground">2026-02-11</span></div><div class="flex flex-wrap gap-2"><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">ETL</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">Data Pipeline</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">pgvector</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">OpenAI</div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80">Python</div></div></header><article class="prose prose-neutral dark:prose-invert max-w-none"><h1 id="100만-건-xml-데이터를-ai-검색-가능하게-만드는-파이프라인" class="text-4xl font-bold mt-10 mb-5 text-foreground">100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인</h1>
<h2 id="rag-데이터-파이프라인-비정형-데이터의-etl" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">RAG 데이터 파이프라인: 비정형 데이터의 ETL</h2>
<p class="my-5 leading-7 text-foreground/90">RAG(Retrieval-Augmented Generation)에서 검색 품질은 곧 생성 품질이다. 아무리 좋은 LLM을 사용해도, 검색 결과가 부정확하면 출력도 부정확하다. 그래서 RAG 시스템의 성패는 <strong class="font-semibold text-foreground">데이터 파이프라인의 품질</strong>에 달려 있다.</p>
<p class="my-5 leading-7 text-foreground/90">RAG 데이터 파이프라인은 본질적으로 <strong class="font-semibold text-foreground">비정형 데이터를 위한 ETL</strong>이다. 전통적인 ETL이 행(row)과 키(key) 단위로 데이터를 변환한다면, RAG ETL은 청크(chunk)와 임베딩(embedding) 단위로 변환한다. 파이프라인의 주요 단계는 다음과 같다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">전통 ETL</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">RAG ETL</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">설명</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">추출 (Extract)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">문서 수집·파싱</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">PDF, HTML, XML 등에서 텍스트 추출</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">변환 (Transform)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">청킹 + 메타데이터 추출</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">텍스트를 적절한 크기로 분할, 메타데이터 부착</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">적재 (Load)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">임베딩 + 벡터 인덱싱</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">텍스트를 벡터로 변환하여 벡터 DB에 적재</td></tr></tbody></table></div>
<p class="my-5 leading-7 text-foreground/90">데이터 소스가 비정형일수록 파싱과 메타데이터 추출의 중요성이 커진다. 특히 XML은 태그와 속성의 노이즈가 임베딩 품질을 떨어뜨리므로, 원본 그대로 임베딩하는 것이 아니라 <strong class="font-semibold text-foreground">구조적 메타데이터를 추출하여 의미 있는 텍스트로 재구성</strong>하는 전처리가 필수다.</p>
<p class="my-5 leading-7 text-foreground/90">이 글에서는 레거시 DB의 XML 디자인 템플릿을 5단계 파이프라인(추출 → 파싱 → 메타데이터 추출 → 임베딩 → 적재)으로 처리하여, 100만 건 인덱싱 비용 $19.5를 달성한 과정을 정리한다.</p>
<h2 id="배경" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">배경</h2>
<p class="my-5 leading-7 text-foreground/90">디자인 AI 시스템의 RAG를 위해서는 기존 XML 디자인 템플릿을 벡터 검색 가능한 상태로 만들어야 한다. 레거시 시스템의 DB에 수백만 건의 XML 디자인 데이터가 저장되어 있는데, 이를 그대로 사용할 수 없다. XML 태그와 속성의 노이즈가 임베딩 품질을 떨어뜨리기 때문이다.</p>
<p class="my-5 leading-7 text-foreground/90">목표는 100만 건부터 시작하여 최대 2,000만 건까지 단계적으로 인덱싱하는 것이다. 이를 위해 5단계 ETL 파이프라인을 설계했다.</p>
<h2 id="파이프라인-전체-흐름" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">파이프라인 전체 흐름</h2>
<div class="my-6 flex justify-center overflow-x-auto bg-card rounded-lg border border-border p-4 [&amp;_svg]:max-w-full"></div>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">단계</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">입력</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">처리</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">출력</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">추출</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">레거시 DB</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">POD_TYPE별 쿼리</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">CSV 덤프</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">파싱</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">XML 문자열</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">lxml 파싱·정규화</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">요소 트리</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">변환</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">요소 트리</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">코드 + AI 메타데이터 추출</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">임베딩 입력 텍스트</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">임베딩</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">텍스트 (~300 tok)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">OpenAI Batch API</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">halfvec(3072)</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">적재</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">메타데이터 + 벡터</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">COPY + executemany</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">T_TEMPLATE 파티션</td></tr></tbody></table></div>
<h2 id="1단계-추출-extract" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">1단계: 추출 (Extract)</h2>
<p class="my-5 leading-7 text-foreground/90">레거시 DB에서 상품 분류(POD_TYPE, 카테고리)와 XML 데이터를 조인하여 추출한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sql" data-theme="github-dark github-light"><code data-language="sql" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">SELECT</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">seqno</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">p</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">pc_seqno</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">name</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">xml_content</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">p</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">pod_type</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">FROM</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> t_template t</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">JOIN</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> t_product p </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">ON</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">product_seqno</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> p</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">seqno</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">WHERE</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> p</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">pod_type</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> &#x27;namecard&#x27;</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">  AND</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">xml_content</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> IS NOT NULL</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">  AND</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> LENGTH</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">xml_content</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 0</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">ORDER BY</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> t</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">seqno</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">;</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">POD_TYPE별로 분리된 CSV 파일로 덤프한다. PostgreSQL COPY와의 호환성을 위해 CSV 형식을 사용한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span>/data/dump/</span></span>
<span data-line=""><span>├── templates_namecard.csv</span></span>
<span data-line=""><span>├── templates_tshirt.csv</span></span>
<span data-line=""><span>├── templates_leaflet.csv</span></span>
<span data-line=""><span>└── ...</span></span></code></pre></figure>
<h2 id="2단계-파싱-parse" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">2단계: 파싱 (Parse)</h2>
<p class="my-5 leading-7 text-foreground/90">XML 템플릿은 4가지 요소 타입(<span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>backgroundimage</span></span></code></span>, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>colorbox</span></span></code></span>, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>picturebox</span></span></code></span>, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>textbox</span></span></code></span>)으로 구성된다. lxml으로 파싱하여 색상, 폰트, 좌표 등 구조적 데이터를 추출한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> lxml </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> etree</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> urllib.parse </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> unquote</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> parse_template</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(xml_content: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; etree._Element:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> not</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> xml_content.strip().startswith(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;&lt;?xml&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        xml_content </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27;</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> +</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> xml_content</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> etree.fromstring(xml_content.encode(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;utf-8&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">))</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> decode_color</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(value: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;&quot;&quot;decimal color → hex 변환 (24-bit RGB / 32-bit ARGB)&quot;&quot;&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> 0x</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">FFFFFF</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        r </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> (value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;&gt;</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 16</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&amp;</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> 0x</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">FF</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        g </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> (value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&gt;&gt;</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 8</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&amp;</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> 0x</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">FF</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        b </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">&amp;</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> 0x</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">FF</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;#</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">r</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">:02X</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">g</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">:02X</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">b</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">:02X</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;#</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">value</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">:06X</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">정규화 규칙:</p>
<ul class="my-5 ml-6 list-disc space-y-2">
<li class="text-foreground/90 leading-7">XML 선언 유무에 관계없이 파싱</li>
<li class="text-foreground/90 leading-7">색상값은 decimal → hex 변환 (24-bit RGB / 32-bit ARGB)</li>
<li class="text-foreground/90 leading-7">텍스트 내용은 3중 URL 디코딩 (<span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>unquote(unquote(unquote(encoded)))</span></span></code></span>)</li>
</ul>
<h2 id="3단계-메타데이터-추출--하이브리드-전략-transform" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">3단계: 메타데이터 추출 — 하이브리드 전략 (Transform)</h2>
<p class="my-5 leading-7 text-foreground/90">이 단계가 파이프라인의 핵심이다. <strong class="font-semibold text-foreground">코드 기반 추출과 AI 기반 추출을 결합</strong>하여 비용을 최소화하면서 의미적 품질을 확보한다.</p>
<h3 id="코드-기반-추출-비용-0" class="text-2xl font-semibold mt-8 mb-3 text-foreground">코드 기반 추출 (비용 $0)</h3>
<p class="my-5 leading-7 text-foreground/90">XML 파싱으로 직접 추출 가능한 구조적 데이터:</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> collections </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Counter</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> extract_metadata_by_code</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(root: etree._Element) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    colors </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">()</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> root.iter():</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        color_val </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;color&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> color_val </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">and</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> color_val.isdigit():</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            colors.add(decode_color(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(color_val)))</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    fonts </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {elem.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;fontFamily&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> root.iter() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;fontFamily&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    element_types </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;backgroundimage&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;colorbox&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;picturebox&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;textbox&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    composition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Counter(</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        elem.tag </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> root.iter() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> elem.tag </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> element_types</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;colors&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">sorted</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(colors),</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;fonts&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">sorted</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(fonts),</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;composition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(composition),</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;canvas_size&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">root.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;width&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;0&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">x</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">root.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;height&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;0&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    }</span></span></code></pre></figure>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">필드</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">추출 방법</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">예시</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">색상 팔레트</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>color</span></span></code></span> 속성 수집 → hex 변환</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>#465F67, #FFFFFF</span></span></code></span></td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">폰트 목록</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>fontFamily</span></span></code></span> 속성 수집</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>NanumGothic, Arial</span></span></code></span></td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">요소 구성</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">태그명별 개수</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>textbox:5, colorbox:3</span></span></code></span></td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">배경 타입</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">backgroundimage 속성 분석</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>단색</span></span></code></span>, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>이미지</span></span></code></span></td></tr></tbody></table></div>
<h3 id="ai-기반-추출-claude-haiku" class="text-2xl font-semibold mt-8 mb-3 text-foreground">AI 기반 추출 (Claude Haiku)</h3>
<p class="my-5 leading-7 text-foreground/90">코드로 추출할 수 없는 <strong class="font-semibold text-foreground">의미적 메타데이터</strong>는 Claude Haiku로 추출한다. 스타일 키워드, 분위기, 용도 같은 정보다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">구성</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">100만 건 비용</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">추출 데이터</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">코드 기반만</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><strong class="font-semibold text-foreground">$0</strong></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">색상, 폰트, 요소 구성</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">AI 기반만</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$3.0</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">스타일, 분위기, 용도 + 구조적 데이터</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">하이브리드 (권장)</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$3.0</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">구조적 + 의미적 데이터 모두</td></tr></tbody></table></div>
<h3 id="개인정보-마스킹" class="text-2xl font-semibold mt-8 mb-3 text-foreground">개인정보 마스킹</h3>
<p class="my-5 leading-7 text-foreground/90">명함, 카드 등 개인정보가 포함된 XML 템플릿은 AI 전송 전에 마스킹이 필요하다. 하이브리드 전략을 적용했다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">PII_HEAVY_TYPES</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;namecard&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;card&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;invitation&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;envelope&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> mask_pii</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(text: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, pod_type: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # 1단계: 코드 — 전화번호, 이메일 (모든 POD_TYPE, $0)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    text </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> mask_pii_by_code(text)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D">    # 2단계: AI — 이름, 주소 (PII 빈도 높은 유형만)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> pod_type </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> PII_HEAVY_TYPES</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        text </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> mask_pii_by_ai(text)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> text</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">전화번호와 이메일은 정규식으로 ~99% 정확도로 감지할 수 있지만, 한국어 이름은 일반 단어와 구분이 어렵다. PII 빈도가 높은 유형(명함, 카드 등 ~10%)만 AI로 처리하여 비용을 $30 수준으로 억제했다.</p>
<h3 id="임베딩-입력-텍스트-조립" class="text-2xl font-semibold mt-8 mb-3 text-foreground">임베딩 입력 텍스트 조립</h3>
<p class="my-5 leading-7 text-foreground/90">코드 추출 + AI 추출 결과를 합쳐서 200~500 토큰 목표로 임베딩 입력 텍스트를 구성한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span>템플릿명: 심플 비즈니스 명함</span></span>
<span data-line=""><span>생산타입: namecard</span></span>
<span data-line=""><span>카테고리: 비즈니스 &gt; 기업</span></span>
<span data-line=""><span>색상: #465F67, #FFFFFF, #000000</span></span>
<span data-line=""><span>폰트: NanumGothic, Arial</span></span>
<span data-line=""><span>배경: 단색</span></span>
<span data-line=""><span>요소: textbox:5, colorbox:3, picturebox:1</span></span>
<span data-line=""><span>스타일: 미니멀, 모던, 클린</span></span>
<span data-line=""><span>분위기: 깔끔하고 전문적인 비즈니스 느낌</span></span>
<span data-line=""><span>용도: 비즈니스, 기업, 공식</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">XML 원본 자체를 임베딩하지 않는 이유는, XML 태그와 속성의 노이즈가 의미 벡터 품질을 떨어뜨리기 때문이다.</p>
<h2 id="4단계-임베딩-embed" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">4단계: 임베딩 (Embed)</h2>
<p class="my-5 leading-7 text-foreground/90">OpenAI text-embedding-3-large로 3072차원 벡터를 생성한다. 2048건씩 배치로 처리한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> embed_batch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(texts: list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]) -&gt; list[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">float</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> client.embeddings.create(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">        model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;text-embedding-3-large&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">        input</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">texts,</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">        dimensions</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">3072</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [item.embedding </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> item </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response.data]</span></span></code></pre></figure>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">규모</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">총 토큰</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Batch API 비용</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">처리 시간</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">100만 건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">3억</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><strong class="font-semibold text-foreground">$19.5</strong></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~3시간</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">1,000만 건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">30억</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><strong class="font-semibold text-foreground">$195</strong></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~28시간</td></tr></tbody></table></div>
<p class="my-5 leading-7 text-foreground/90">Batch API를 사용하면 표준 요금 대비 50% 할인을 받을 수 있다. 처리 완료까지 최대 24시간이지만, 1회성 인덱싱이므로 충분하다.</p>
<h2 id="5단계-적재-load" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">5단계: 적재 (Load)</h2>
<p class="my-5 leading-7 text-foreground/90">메타데이터는 PostgreSQL COPY로 빠르게 적재하고, 벡터는 asyncpg <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>executemany</span></span></code></span>로 삽입한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> insert_vectors</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(templates: list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">], vectors: list[list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">float</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]):</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    records </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        (t[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;seqno&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">], t[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;pod_type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">], np.array(v, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">dtype</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">np.float16).tobytes())</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> t, v </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> zip</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(templates, vectors)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    ]</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> pool.acquire() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> conn:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> conn.executemany(</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &#x27;UPDATE &quot;T_TEMPLATE&quot; SET &quot;EMBEDDING&quot; = $3::halfvec &#x27;</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &#x27;WHERE &quot;SEQNO&quot; = $1 AND &quot;POD_TYPE&quot; = $2&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            records,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        )</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">모든 벡터 삽입 완료 후 HNSW 인덱스를 빌드한다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">규모</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">파티션당 빌드 시간</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">10만 건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~3분</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">100만 건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~30분</td></tr></tbody></table></div>
<h2 id="에러-처리-체크포인트와-격리" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">에러 처리: 체크포인트와 격리</h2>
<p class="my-5 leading-7 text-foreground/90">100만 건 처리 중 오류가 발생하면 처음부터 다시 하지 않는다. 마지막으로 성공한 SEQNO를 체크포인트로 기록하여 이어서 처리한다.</p>
<figure data-rehype-pretty-code-figure="" class="not-prose my-6"><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> process_all_embeddings</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(templates, batch_size</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">2048</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> i </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">len</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(templates), batch_size):</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        batch </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> templates[i:i </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">+</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> batch_size]</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        vectors </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> embed_batch([t[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;embedding_text&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> t </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> batch])</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> insert_vectors(batch, vectors)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> save_checkpoint(batch[</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">-</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">][</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;seqno&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">])</span></span></code></pre></figure>
<p class="my-5 leading-7 text-foreground/90">실패한 건은 별도 에러 로그에 기록하고, 정상 건 처리를 계속 진행한다. 에러 건은 나중에 모아서 재처리한다.</p>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">단위</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">크기</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">실패 시 처리</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">임베딩 배치</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">2,048건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">배치 단위 재시도</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">DB 삽입 배치</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">5,000건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">트랜잭션 롤백 후 재시도</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">체크포인트</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">10,000건</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">마지막 체크포인트부터 재시작</td></tr></tbody></table></div>
<h2 id="단계별-비용" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">단계별 비용</h2>
<div class="my-8 overflow-x-auto bg-card rounded-lg border border-border"><table class="w-full border-collapse"><thead class="bg-muted"><tr><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">Phase</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">내용</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">API 비용</th><th class="border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0">검색 품질</th></tr></thead><tbody><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Phase 1</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">코드 메타데이터 + 임베딩</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0"><strong class="font-semibold text-foreground">$19.5</strong></td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">구조적 데이터 기반</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Phase 2</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">+ AI 스타일 키워드 + 재임베딩</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">$42.0</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">+ 스타일/분위기 키워드</td></tr><tr><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">Phase 3</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">+ Vision 이미지 분석</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">~$811.5</td><td class="border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_&amp;]:border-b-0">+ 이미지 분석</td></tr></tbody></table></div>
<p class="my-5 leading-7 text-foreground/90">Phase 1의 검색 품질이 충분하면 Phase 2를 건너뛸 수 있다. Phase 3의 이미지 분석은 비용이 높으므로 텍스트 기반 검색 품질 평가 후 결정한다.</p>
<h2 id="정리" class="text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2">정리</h2>
<p class="my-5 leading-7 text-foreground/90">이 파이프라인에서 가장 중요한 결정은 <strong class="font-semibold text-foreground">하이브리드 메타데이터 추출 전략</strong>이다.</p>
<ul class="my-5 ml-6 list-disc space-y-2">
<li class="text-foreground/90 leading-7">XML 구조적 데이터(색상, 폰트, 요소 구성)는 코드로 추출하여 비용 $0</li>
<li class="text-foreground/90 leading-7">의미적 데이터(스타일, 분위기)는 AI로 추출하되, Phase에 따라 선택적 적용</li>
<li class="text-foreground/90 leading-7">개인정보 마스킹도 코드 우선, AI는 PII 빈도 높은 유형만 처리</li>
</ul>
<p class="my-5 leading-7 text-foreground/90">100만 건 인덱싱이 $19.5로 가능한 것은 이 하이브리드 전략 덕분이다. XML 원본 대신 구조화된 메타데이터 텍스트를 임베딩하는 것도 비용과 품질 양면에서 효과적이었다.</p></article><section class="mt-12 pt-8 border-t border-border"></section></div></div><!--$--><!--/$--></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[443316,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\"],\"default\"]\n3:I[163720,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\"],\"NavBar\"]\n4:I[925270,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n5:I[585455,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n6:I[951506,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\",\"/_next/static/chunks/adc93b9d12c01e00.js\",\"/_next/static/chunks/8d5d30bb3315a01b.js\",\"/_next/static/chunks/77bb2061874ac018.js\",\"/_next/static/chunks/38e38e36e6ce0d91.js\",\"/_next/static/chunks/659198ab3dae4258.js\",\"/_next/static/chunks/99d37ae7b03a4a6d.js\",\"/_next/static/chunks/3d082df2bbbd0a90.js\",\"/_next/static/chunks/4cb06eecdd277427.js\",\"/_next/static/chunks/e4f08b75bcddd08a.js\"],\"\"]\ne:I[807871,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"default\"]\n:HL[\"/_next/static/chunks/f530ac11b30b3af0.css\",\"style\"]\n:HL[\"/fonts/PretendardVariable-subset.woff2\",\"font\",{\"crossOrigin\":\"anonymous\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"tIT0igUXZ6FsgoL1k_h3j\",\"c\":[\"\",\"posts\",\"xml-data-pipeline-for-ai-search\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"xml-data-pipeline-for-ai-search\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/f530ac11b30b3af0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/cfc3767bca0bc286.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/8e14ec824c461f29.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  (function() {\\n    try {\\n      var theme = localStorage.getItem('theme');\\n      var valid = ['light', 'dark', 'korean', 'terminal'];\\n      var root = document.documentElement;\\n      root.classList.remove('light', 'dark', 'korean', 'terminal');\\n      if (valid.indexOf(theme) !== -1) {\\n        root.classList.add(theme);\\n      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\\n        root.classList.add('dark');\\n      }\\n    } catch (e) {}\\n  })();\\n\"}}],[\"$\",\"link\",null,{\"rel\":\"preload\",\"href\":\"/fonts/PretendardVariable-subset.woff2\",\"as\":\"font\",\"type\":\"font/woff2\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://img.shields.io\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon-light.svg\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon-light.svg\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon-light.svg\"}]]}],[\"$\",\"body\",null,{\"className\":\"min-h-screen flex flex-col bg-background text-foreground antialiased\",\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 flex flex-col\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full max-w-4xl mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-24 flex flex-col items-center text-center\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-6xl font-bold text-muted-foreground/30 mb-6\",\"children\":\"404\"}],[\"$\",\"h1\",null,{\"className\":\"text-2xl font-bold text-foreground mb-2\",\"children\":\"페이지를 찾을 수 없습니다\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground mb-8\",\"children\":\"요청하신 페이지가 존재하지 않거나 삭제되었습니다.\"}],[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-4 h-4\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"홈으로 돌아가기\"}]]}]]}]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"border-t border-border\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto px-6 sm:px-8 md:px-12 lg:px-16 py-6 flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-muted-foreground\",\"children\":[[\"$\",\"span\",null,{\"children\":\"© 2025 anveloper.dev\"}],[\"$\",\"nav\",null,{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",\"GitHub\",{\"className\":\"flex items-center gap-3\",\"children\":[false,[\"$\",\"$L6\",null,{\"href\":\"https://github.com/anveloper\",\"className\":\"hover:text-foreground transition-colors\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"GitHub\"}]]}],[\"$\",\"span\",\"LinkedIn\",{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",null,{\"aria-hidden\":true,\"children\":\"·\"}],[\"$\",\"$L6\",null,{\"href\":\"https://www.linkedin.com/in/anveloper\",\"className\":\"hover:text-foreground transition-colors\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"LinkedIn\"}]]}],[\"$\",\"span\",\"Contact\",{\"className\":\"flex items-center gap-3\",\"children\":[[\"$\",\"span\",null,{\"aria-hidden\":true,\"children\":\"·\"}],\"$L7\"]}]]}]]}]}],\"$L8\"]}]]}]]}],{\"children\":[\"$L9\",{\"children\":[\"$La\",{\"children\":[\"$Lb\",{},null,false,false]},null,false,false]},null,false,false]},[\"$Lc\",[],[]],false,false],\"$Ld\",false]],\"m\":\"$undefined\",\"G\":[\"$e\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:I[453013,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\"],\"default\"]\n11:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"OutletBoundary\"]\n12:\"$Sreact.suspense\"\n14:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"ViewportBoundary\"]\n16:I[95276,[\"/_next/static/chunks/1c8dd1e98f29bd04.js\",\"/_next/static/chunks/de15131553ab167d.js\"],\"MetadataBoundary\"]\n7:[\"$\",\"$L6\",null,{\"href\":\"/contact\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Contact\"}]\n8:[\"$\",\"$Lf\",null,{}]\n9:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\na:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nb:[\"$\",\"$1\",\"c\",{\"children\":[\"$L10\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/adc93b9d12c01e00.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/8d5d30bb3315a01b.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/77bb2061874ac018.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/38e38e36e6ce0d91.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-4\",{\"src\":\"/_next/static/chunks/659198ab3dae4258.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-5\",{\"src\":\"/_next/static/chunks/99d37ae7b03a4a6d.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-6\",{\"src\":\"/_next/static/chunks/3d082df2bbbd0a90.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-7\",{\"src\":\"/_next/static/chunks/4cb06eecdd277427.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-8\",{\"src\":\"/_next/static/chunks/e4f08b75bcddd08a.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L11\",null,{\"children\":[\"$\",\"$12\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@13\"}]}]]}]\nc:[\"$\",\"svg\",\"l\",{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-loader h-11 w-11 absolute m-auto top-0 bottom-0 right-0 left-0 animate-spin text-muted-foreground z-50\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"3427ic\",{\"d\":\"M12 2v4\"}],[\"$\",\"path\",\"r700ao\",{\"d\":\"m16.2 7.8 2.9-2.9\"}],[\"$\",\"path\",\"wj9ykh\",{\"d\":\"M18 12h4\"}],[\"$\",\"path\",\"1bxg5t\",{\"d\":\"m16.2 16.2 2.9 2.9\"}],[\"$\",\"path\",\"jadmvz\",{\"d\":\"M12 18v4\"}],[\"$\",\"path\",\"bwix9q\",{\"d\":\"m4.9 19.1 2.9-2.9\"}],[\"$\",\"path\",\"j09sii\",{\"d\":\"M2 12h4\"}],[\"$\",\"path\",\"giyufr\",{\"d\":\"m4.9 4.9 2.9 2.9\"}],\"$undefined\"]}]\nd:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L14\",null,{\"children\":\"$L15\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L16\",null,{\"children\":[\"$\",\"$12\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L17\"}]}]}],null]}]\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"18:I[166627,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\",\"/_next/static/chunks/adc93b9d12c01e00.js\",\"/_next/static/chunks/8d5d30bb3315a01b.js\",\"/_next/static/chunks/77bb2061874ac018.js\",\"/_next/static/chunks/38e38e36e6ce0d91.js\",\"/_next/static/chunks/659198ab3dae4258.js\",\"/_next/static/chunks/99d37ae7b03a4a6d.js\",\"/_next/static/chunks/3d082df2bbbd0a90.js\",\"/_next/static/chunks/4cb06eecdd277427.js\",\"/_next/static/chunks/e4f08b75bcddd08a.js\"],\"TableOfContents\"]\n1a:I[826107,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\",\"/_next/static/chunks/adc93b9d12c01e00.js\",\"/_next/static/chunks/8d5d30bb3315a01b.js\",\"/_next/static/chunks/77bb2061874ac018.js\",\"/_next/static/chunks/38e38e36e6ce0d91.js\",\"/_next/static/chunks/659198ab3dae4258.js\",\"/_next/static/chunks/99d37ae7b03a4a6d.js\",\"/_next/static/chunks/3d082df2bbbd0a90.js\",\"/_next/static/chunks/4cb06eecdd277427.js\",\"/_next/static/chunks/e4f08b75bcddd08a.js\"],\"GiscusComments\"]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"div\",null,{\"className\":\"pt-28 pb-8 px-6 sm:px-8 md:px-12 lg:px-16 md:pt-20 min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full max-w-4xl mx-auto\",\"children\":[[\"$\",\"$L18\",null,{\"items\":[{\"id\":\"rag-데이터-파이프라인-비정형-데이터의-etl\",\"text\":\"RAG 데이터 파이프라인: 비정형 데이터의 ETL\",\"level\":2},{\"id\":\"배경\",\"text\":\"배경\",\"level\":2},{\"id\":\"파이프라인-전체-흐름\",\"text\":\"파이프라인 전체 흐름\",\"level\":2},{\"id\":\"1단계-추출-extract\",\"text\":\"1단계: 추출 (Extract)\",\"level\":2},{\"id\":\"2단계-파싱-parse\",\"text\":\"2단계: 파싱 (Parse)\",\"level\":2},{\"id\":\"3단계-메타데이터-추출--하이브리드-전략-transform\",\"text\":\"3단계: 메타데이터 추출 — 하이브리드 전략 (Transform)\",\"level\":2},{\"id\":\"코드-기반-추출-비용-0\",\"text\":\"코드 기반 추출 (비용 $0)\",\"level\":3},{\"id\":\"ai-기반-추출-claude-haiku\",\"text\":\"AI 기반 추출 (Claude Haiku)\",\"level\":3},{\"id\":\"개인정보-마스킹\",\"text\":\"개인정보 마스킹\",\"level\":3},{\"id\":\"임베딩-입력-텍스트-조립\",\"text\":\"임베딩 입력 텍스트 조립\",\"level\":3},{\"id\":\"4단계-임베딩-embed\",\"text\":\"4단계: 임베딩 (Embed)\",\"level\":2},{\"id\":\"5단계-적재-load\",\"text\":\"5단계: 적재 (Load)\",\"level\":2},{\"id\":\"에러-처리-체크포인트와-격리\",\"text\":\"에러 처리: 체크포인트와 격리\",\"level\":2},{\"id\":\"단계별-비용\",\"text\":\"단계별 비용\",\"level\":2},{\"id\":\"정리\",\"text\":\"정리\",\"level\":2}]}],[\"$\",\"$L6\",null,{\"href\":\"/posts\",\"className\":\"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-4 h-4\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"포스트 목록으로 돌아가기\"}]]}],[\"$\",\"header\",null,{\"className\":\"border-b border-border pb-6 mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl sm:text-3xl font-bold text-foreground mb-4\",\"children\":\"100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center gap-4 mb-4\",\"children\":[\"$\",\"span\",null,{\"className\":\"text-sm text-muted-foreground\",\"children\":\"2026-02-11\"}]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2\",\"children\":[[\"$\",\"div\",\"ETL\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"ETL\"}],[\"$\",\"div\",\"Data Pipeline\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"Data Pipeline\"}],[\"$\",\"div\",\"pgvector\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"pgvector\"}],[\"$\",\"div\",\"OpenAI\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"OpenAI\"}],[\"$\",\"div\",\"Python\",{\"className\":\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\"children\":\"Python\"}]]}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-neutral dark:prose-invert max-w-none\",\"children\":\"$L19\"}],[\"$\",\"$L1a\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"13:null\n17:[[\"$\",\"title\",\"0\",{\"children\":\"100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인 | 안성진\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"ETL,Data Pipeline,pgvector,OpenAI,Python\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"google-site-verification\",\"content\":\"kpYkq06WB0cQDLByVOdZD_5HXLkbxzFAvQKQ-Rp9sKY\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다.\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:url\",\"content\":\"https://anveloper.dev/posts/xml-data-pipeline-for-ai-search\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:description\",\"content\":\"레거시 DB의 XML 디자인 템플릿을 추출·파싱·메타데이터 추출·임베딩·적재하는 5단계 ETL 파이프라인을 설계한 과정을 정리했다.\"}]]\n"])</script><script>self.__next_f.push([1,"19:[[\"$\",\"h1\",null,{\"id\":\"100만-건-xml-데이터를-ai-검색-가능하게-만드는-파이프라인\",\"children\":\"100만 건 XML 데이터를 AI 검색 가능하게 만드는 파이프라인\",\"className\":\"text-4xl font-bold mt-10 mb-5 text-foreground\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"rag-데이터-파이프라인-비정형-데이터의-etl\",\"children\":\"RAG 데이터 파이프라인: 비정형 데이터의 ETL\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"RAG(Retrieval-Augmented Generation)에서 검색 품질은 곧 생성 품질이다. 아무리 좋은 LLM을 사용해도, 검색 결과가 부정확하면 출력도 부정확하다. 그래서 RAG 시스템의 성패는 \",[\"$\",\"strong\",null,{\"children\":\"데이터 파이프라인의 품질\",\"className\":\"font-semibold text-foreground\"}],\"에 달려 있다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"RAG 데이터 파이프라인은 본질적으로 \",[\"$\",\"strong\",null,{\"children\":\"비정형 데이터를 위한 ETL\",\"className\":\"font-semibold text-foreground\"}],\"이다. 전통적인 ETL이 행(row)과 키(key) 단위로 데이터를 변환한다면, RAG ETL은 청크(chunk)와 임베딩(embedding) 단위로 변환한다. 파이프라인의 주요 단계는 다음과 같다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"전통 ETL\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"RAG ETL\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"설명\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"추출 (Extract)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"문서 수집·파싱\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"PDF, HTML, XML 등에서 텍스트 추출\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"변환 (Transform)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"청킹 + 메타데이터 추출\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"텍스트를 적절한 크기로 분할, 메타데이터 부착\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"적재 (Load)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"임베딩 + 벡터 인덱싱\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"텍스트를 벡터로 변환하여 벡터 DB에 적재\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"데이터 소스가 비정형일수록 파싱과 메타데이터 추출의 중요성이 커진다. 특히 XML은 태그와 속성의 노이즈가 임베딩 품질을 떨어뜨리므로, 원본 그대로 임베딩하는 것이 아니라 \",[\"$\",\"strong\",null,{\"children\":\"구조적 메타데이터를 추출하여 의미 있는 텍스트로 재구성\",\"className\":\"font-semibold text-foreground\"}],\"하는 전처리가 필수다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이 글에서는 레거시 DB의 XML 디자인 템플릿을 5단계 파이프라인(추출 → 파싱 → 메타데이터 추출 → 임베딩 → 적재)으로 처리하여, 100만 건 인덱싱 비용 $19.5를 달성한 과정을 정리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"배경\",\"children\":\"배경\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"디자인 AI 시스템의 RAG를 위해서는 기존 XML 디자인 템플릿을 벡터 검색 가능한 상태로 만들어야 한다. 레거시 시스템의 DB에 수백만 건의 XML 디자인 데이터가 저장되어 있는데, 이를 그대로 사용할 수 없다. XML 태그와 속성의 노이즈가 임베딩 품질을 떨어뜨리기 때문이다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}],\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\"]\n"])</script><script>self.__next_f.push([1,"50:I[463508,[\"/_next/static/chunks/cfc3767bca0bc286.js\",\"/_next/static/chunks/8e14ec824c461f29.js\",\"/_next/static/chunks/adc93b9d12c01e00.js\",\"/_next/static/chunks/8d5d30bb3315a01b.js\",\"/_next/static/chunks/77bb2061874ac018.js\",\"/_next/static/chunks/38e38e36e6ce0d91.js\",\"/_next/static/chunks/659198ab3dae4258.js\",\"/_next/static/chunks/99d37ae7b03a4a6d.js\",\"/_next/static/chunks/3d082df2bbbd0a90.js\",\"/_next/static/chunks/4cb06eecdd277427.js\",\"/_next/static/chunks/e4f08b75bcddd08a.js\"],\"Mermaid\"]\n1b:[\"$\",\"p\",null,{\"children\":\"목표는 100만 건부터 시작하여 최대 2,000만 건까지 단계적으로 인덱싱하는 것이다. 이를 위해 5단계 ETL 파이프라인을 설계했다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n1c:[\"$\",\"h2\",null,{\"id\":\"파이프라인-전체-흐름\",\"children\":\"파이프라인 전체 흐름\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n1d:[\"$\",\"$L50\",null,{\"chart\":\"flowchart LR\\n    subgraph Extract[\u0026quot;1. 추출\u0026quot;]\\n        A[\u0026quot;레거시 DB\u0026quot;] --\u003e|POD_TYPE별 쿼리| B[CSV 덤프]\\n    end\\n\\n    subgraph Parse[\u0026quot;2. 파싱\u0026quot;]\\n        B --\u003e C[XML 파싱]\\n        C --\u003e D[정규화된 요소 트리]\\n    end\\n\\n    subgraph Transform[\u0026quot;3. 메타데이터 추출\u0026quot;]\\n        D --\u003e E[코드 기반]\\n        D --\u003e F[AI 기반]\\n        E --\u003e G[임베딩 입력 텍스트]\\n        F --\u003e G\\n    end\\n\\n    subgraph Embed[\u0026quot;4. 임베딩\u0026quot;]\\n        G --\u003e|OpenAI Batch API| H[\u0026quot;halfvec(3072)\u0026quot;]\\n    end\\n\\n    subgraph Load[\u0026quot;5. 적재\u0026quot;]\\n        H --\u003e I[T_TEMPLATE 파티션별 INSERT]\\n        I --\u003e J[HNSW 인덱스 빌드]\\n    end\"}]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"단계\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"입력\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"처리\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"출력\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"추출\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"레거시 DB\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"POD_TYPE별 쿼리\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"CSV 덤프\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"파싱\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"XML 문자열\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"lxml 파싱·정규화\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"요소 트리\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"변환\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"요소 트리\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"코드 + AI 메타데이터 추출\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"임베딩 입력 텍스트\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"임베딩\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"텍스트 (~300 tok)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"OpenAI Batch API\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"halfvec(3072)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"적재\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"메타데이터 + 벡터\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"COPY + executemany\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"T_TEMPLATE 파티션\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1f:[\"$\",\"h2\",null,{\"id\":\"1단계-추출-extract\",\"children\":\"1단계: 추출 (Extract)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n20:[\"$\",\"p\",null,{\"children\":\"레거시 DB에서 상품 분류(POD_TYPE, 카테고리)와 XML 데이터를 조인하여 추출한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"sql\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"sql\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"SELECT\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"seqno\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"p\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"pc_seqno\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"name\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"xml_content\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"p\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"pod_type\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"FROM\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" t_template t\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"JOIN\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" t_product p \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"ON\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"product_seqno\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" p\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"seqno\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"WHERE\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" p\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"pod_type\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'namecard'\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"  AND\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"xml_content\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" IS NOT NULL\"}]]}],\"\\n\",\"$L51\",\"\\n\",\"$L52\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"22:[\"$\",\"p\",null,{\"children\":\"POD_TYPE별로 분리된 CSV 파일로 덤프한다. PostgreSQL COPY와의 호환성을 위해 CSV 형식을 사용한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n23:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"/data/dump/\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"├── templates_namecard.csv\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"├── templates_tshirt.csv\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"├── templates_leaflet.csv\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"└── ...\"}]}]]}]}],\"className\":\"not-prose my-6\"}]\n24:[\"$\",\"h2\",null,{\"id\":\"2단계-파싱-parse\",\"children\":\"2단계: 파싱 (Parse)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"p\",null,{\"children\":[\"XML 템플릿은 4가지 요소 타입(\",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"backgroundimage\"}]}]}]}],\", \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"colorbox\"}]}]}]}],\", \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"picturebox\"}]}]}]}],\", \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"textbox\"}]}]}]}],\")으로 구성된다. lxml으로 파싱하여 색상, 폰트, 좌표 등 구조적 데이터를 추출한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"26:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" lxml \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" etree\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" urllib.parse \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" unquote\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" parse_template\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(xml_content: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e etree._Element:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" not\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" xml_content.strip().startswith(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\u003c?xml\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        xml_content \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" '\u003c?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?\u003e'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" +\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" xml_content\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" etree.fromstring(xml_content.encode(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"utf-8\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" decode_color\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(value: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"int\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"\\\"\\\"decimal color → hex 변환 (24-bit RGB / 32-bit ARGB)\\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],\"$L53\",\"$L54\",\"$L55\",\"$L56\",\"$L57\"]}],\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"27:[\"$\",\"p\",null,{\"children\":\"정규화 규칙:\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n28:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"XML 선언 유무에 관계없이 파싱\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"색상값은 decimal → hex 변환 (24-bit RGB / 32-bit ARGB)\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"텍스트 내용은 3중 URL 디코딩 (\",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"unquote(unquote(unquote(encoded)))\"}]}]}]}],\")\"],\"className\":\"text-foreground/90 leading-7\"}],\"\\n\"],\"className\":\"my-5 ml-6 list-disc space-y-2\"}]\n29:[\"$\",\"h2\",null,{\"id\":\"3단계-메타데이터-추출--하이브리드-전략-transform\",\"children\":\"3단계: 메타데이터 추출 — 하이브리드 전략 (Transform)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n2a:[\"$\",\"p\",null,{\"children\":[\"이 단계가 파이프라인의 핵심이다. \",[\"$\",\"strong\",null,{\"children\":\"코드 기반 추출과 AI 기반 추출을 결합\",\"className\":\"font-semibold text-foreground\"}],\"하여 비용을 최소화하면서 의미적 품질을 확보한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n2b:[\"$\",\"h3\",null,{\"id\":\"코드-기반-추출-비용-0\",\"children\":\"코드 기반 추출 (비용 $0)\",\"className\":\"text-2xl font-semibold mt-8 mb-3 text-foreground\"}]\n2c:[\"$\",\"p\",null,{\"children\":\"XML 파싱으로 직접 추출 가능한 구조적 데이터:\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"2d:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" collections \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Counter\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" extract_metadata_by_code\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(root: etree._Element) -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    colors \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" set\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" root.iter():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        color_val \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"color\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" color_val \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"and\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" color_val.isdigit():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            colors.add(decode_color(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"int\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(color_val)))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    fonts \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {elem.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"fontFamily\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" root.iter() \"}],\"$L5d\",\"$L5e\",\"$L5f\",\"$L60\"]}],\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"2e:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"필드\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"추출 방법\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"예시\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"색상 팔레트\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"color\"}]}]}]}],\" 속성 수집 → hex 변환\"],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"#465F67, #FFFFFF\"}]}]}]}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"폰트 목록\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"fontFamily\"}]}]}]}],\" 속성 수집\"],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"NanumGothic, Arial\"}]}]}]}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"요소 구성\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"태그명별 개수\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"textbox:5, colorbox:3\"}]}]}]}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"배경 타입\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"backgroundimage 속성 분석\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":\"$L6d\"}],\", \",\"$L6e\"],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"2f:[\"$\",\"h3\",null,{\"id\":\"ai-기반-추출-claude-haiku\",\"children\":\"AI 기반 추출 (Claude Haiku)\",\"className\":\"text-2xl font-semibold mt-8 mb-3 text-foreground\"}]\n30:[\"$\",\"p\",null,{\"children\":[\"코드로 추출할 수 없는 \",[\"$\",\"strong\",null,{\"children\":\"의미적 메타데이터\",\"className\":\"font-semibold text-foreground\"}],\"는 Claude Haiku로 추출한다. 스타일 키워드, 분위기, 용도 같은 정보다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"구성\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"100만 건 비용\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"추출 데이터\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"코드 기반만\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"$$0\",\"className\":\"font-semibold text-foreground\"}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"색상, 폰트, 요소 구성\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"AI 기반만\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$3.0\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"스타일, 분위기, 용도 + 구조적 데이터\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"하이브리드 (권장)\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$3.0\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"구조적 + 의미적 데이터 모두\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"h3\",null,{\"id\":\"개인정보-마스킹\",\"children\":\"개인정보 마스킹\",\"className\":\"text-2xl font-semibold mt-8 mb-3 text-foreground\"}]\n33:[\"$\",\"p\",null,{\"children\":\"명함, 카드 등 개인정보가 포함된 XML 템플릿은 AI 전송 전에 마스킹이 필요하다. 하이브리드 전략을 적용했다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"34:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"PII_HEAVY_TYPES\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"namecard\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"card\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"invitation\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"envelope\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" mask_pii\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(text: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", pod_type: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # 1단계: 코드 — 전화번호, 이메일 (모든 POD_TYPE, $0)\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    text \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" mask_pii_by_code(text)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    # 2단계: AI — 이름, 주소 (PII 빈도 높은 유형만)\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" pod_type \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" PII_HEAVY_TYPES\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        text \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" mask_pii_by_ai(text)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" text\"}]]}]]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"p\",null,{\"children\":\"전화번호와 이메일은 정규식으로 ~99% 정확도로 감지할 수 있지만, 한국어 이름은 일반 단어와 구분이 어렵다. PII 빈도가 높은 유형(명함, 카드 등 ~10%)만 AI로 처리하여 비용을 $30 수준으로 억제했다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n36:[\"$\",\"h3\",null,{\"id\":\"임베딩-입력-텍스트-조립\",\"children\":\"임베딩 입력 텍스트 조립\",\"className\":\"text-2xl font-semibold mt-8 mb-3 text-foreground\"}]\n37:[\"$\",\"p\",null,{\"children\":\"코드 추출 + AI 추출 결과를 합쳐서 200~500 토큰 목표로 임베딩 입력 텍스트를 구성한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"38:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"템플릿명: 심플 비즈니스 명함\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"생산타입: namecard\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"카테고리: 비즈니스 \u003e 기업\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"색상: #465F67, #FFFFFF, #000000\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"폰트: NanumGothic, Arial\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"배경: 단색\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"요소: textbox:5, colorbox:3, picturebox:1\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"스타일: 미니멀, 모던, 클린\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"분위기: 깔끔하고 전문적인 비즈니스 느낌\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"용도: 비즈니스, 기업, 공식\"}]}]]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"39:[\"$\",\"p\",null,{\"children\":\"XML 원본 자체를 임베딩하지 않는 이유는, XML 태그와 속성의 노이즈가 의미 벡터 품질을 떨어뜨리기 때문이다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n3a:[\"$\",\"h2\",null,{\"id\":\"4단계-임베딩-embed\",\"children\":\"4단계: 임베딩 (Embed)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n3b:[\"$\",\"p\",null,{\"children\":\"OpenAI text-embedding-3-large로 3072차원 벡터를 생성한다. 2048건씩 배치로 처리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"3c:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" embed_batch\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(texts: list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]) -\u003e list[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"float\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" client.embeddings.create(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"        model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"text-embedding-3-large\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"        input\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"texts,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"        dimensions\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"3072\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [item.embedding \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" item \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response.data]\"}]]}]]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"3d:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"규모\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"총 토큰\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"Batch API 비용\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"처리 시간\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"100만 건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"3억\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"$$19.5\",\"className\":\"font-semibold text-foreground\"}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~3시간\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"1,000만 건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"30억\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"$$195\",\"className\":\"font-semibold text-foreground\"}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~28시간\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3e:[\"$\",\"p\",null,{\"children\":\"Batch API를 사용하면 표준 요금 대비 50% 할인을 받을 수 있다. 처리 완료까지 최대 24시간이지만, 1회성 인덱싱이므로 충분하다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n3f:[\"$\",\"h2\",null,{\"id\":\"5단계-적재-load\",\"children\":\"5단계: 적재 (Load)\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n40:[\"$\",\"p\",null,{\"children\":[\"메타데이터는 PostgreSQL COPY로 빠르게 적재하고, 벡터는 asyncpg \",[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"executemany\"}]}]}]}],\"로 삽입한다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"41:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" insert_vectors\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(templates: list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], vectors: list[list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"float\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    records \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        (t[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"seqno\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], t[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"pod_type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], np.array(v, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"dtype\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"np.float16).tobytes())\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" t, v \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" zip\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(templates, vectors)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" with\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" pool.acquire() \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" conn:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" conn.executemany(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            'UPDATE \\\"T_TEMPLATE\\\" SET \\\"EMBEDDING\\\" = $3::halfvec '\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            'WHERE \\\"SEQNO\\\" = $1 AND \\\"POD_TYPE\\\" = $2'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            records,\"}]}],\"\\n\",\"$L6f\"]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"42:[\"$\",\"p\",null,{\"children\":\"모든 벡터 삽입 완료 후 HNSW 인덱스를 빌드한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n43:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"규모\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"파티션당 빌드 시간\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"10만 건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~3분\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"100만 건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~30분\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n44:[\"$\",\"h2\",null,{\"id\":\"에러-처리-체크포인트와-격리\",\"children\":\"에러 처리: 체크포인트와 격리\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n45:[\"$\",\"p\",null,{\"children\":\"100만 건 처리 중 오류가 발생하면 처음부터 다시 하지 않는다. 마지막으로 성공한 SEQNO를 체크포인트로 기록하여 이어서 처리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"46:[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" process_all_embeddings\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(templates, batch_size\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"2048\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" i \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" range\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(templates), batch_size):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        batch \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" templates[i:i \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" batch_size]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        vectors \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" embed_batch([t[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"embedding_text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" t \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" batch])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" insert_vectors(batch, vectors)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" save_checkpoint(batch[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"][\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"seqno\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"])\"}]]}]]}]}],\"className\":\"not-prose my-6\"}]\n"])</script><script>self.__next_f.push([1,"47:[\"$\",\"p\",null,{\"children\":\"실패한 건은 별도 에러 로그에 기록하고, 정상 건 처리를 계속 진행한다. 에러 건은 나중에 모아서 재처리한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"48:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"단위\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"크기\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"실패 시 처리\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"임베딩 배치\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"2,048건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"배치 단위 재시도\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"DB 삽입 배치\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"5,000건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"트랜잭션 롤백 후 재시도\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"체크포인트\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"10,000건\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"마지막 체크포인트부터 재시작\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"49:[\"$\",\"h2\",null,{\"id\":\"단계별-비용\",\"children\":\"단계별 비용\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n"])</script><script>self.__next_f.push([1,"4a:[\"$\",\"div\",null,{\"className\":\"my-8 overflow-x-auto bg-card rounded-lg border border-border\",\"children\":[\"$\",\"table\",null,{\"className\":\"w-full border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Phase\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"내용\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"API 비용\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}],[\"$\",\"th\",null,{\"children\":\"검색 품질\",\"className\":\"border-b border-r border-border px-4 py-2 text-left font-semibold last:border-r-0\"}]]}],\"className\":\"bg-muted\"}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Phase 1\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"코드 메타데이터 + 임베딩\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"$$19.5\",\"className\":\"font-semibold text-foreground\"}],\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"구조적 데이터 기반\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Phase 2\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"+ AI 스타일 키워드 + 재임베딩\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"$$42.0\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"+ 스타일/분위기 키워드\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Phase 3\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"+ Vision 이미지 분석\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"~$811.5\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}],[\"$\",\"td\",null,{\"children\":\"+ 이미지 분석\",\"className\":\"border-b border-r border-border px-4 py-2 last:border-r-0 [tr:last-child_\u0026]:border-b-0\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"4b:[\"$\",\"p\",null,{\"children\":\"Phase 1의 검색 품질이 충분하면 Phase 2를 건너뛸 수 있다. Phase 3의 이미지 분석은 비용이 높으므로 텍스트 기반 검색 품질 평가 후 결정한다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n4c:[\"$\",\"h2\",null,{\"id\":\"정리\",\"children\":\"정리\",\"className\":\"text-3xl font-semibold mt-9 mb-4 text-foreground border-b border-border pb-2\"}]\n4d:[\"$\",\"p\",null,{\"children\":[\"이 파이프라인에서 가장 중요한 결정은 \",[\"$\",\"strong\",null,{\"children\":\"하이브리드 메타데이터 추출 전략\",\"className\":\"font-semibold text-foreground\"}],\"이다.\"],\"className\":\"my-5 leading-7 text-foreground/90\"}]\n4e:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"XML 구조적 데이터(색상, 폰트, 요소 구성)는 코드로 추출하여 비용 $0\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"의미적 데이터(스타일, 분위기)는 AI로 추출하되, Phase에 따라 선택적 적용\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"개인정보 마스킹도 코드 우선, AI는 PII 빈도 높은 유형만 처리\",\"className\":\"text-foreground/90 leading-7\"}],\"\\n\"],\"className\":\"my-5 ml-6 list-disc space-y-2\"}]\n4f:[\"$\",\"p\",null,{\"children\":\"100만 건 인덱싱이 $19.5로 가능한 것은 이 하이브리드 전략 덕분이다. XML 원본 대신 구조화된 메타데이터 텍스트를 임베딩하는 것도 비용과 품질 양면에서 효과적이었다.\",\"className\":\"my-5 leading-7 text-foreground/90\"}]\n"])</script><script>self.__next_f.push([1,"51:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"  AND\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" LENGTH\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"xml_content\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 0\"}]]}]\n52:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"ORDER BY\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" t\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"seqno\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}]\n53:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" value \"}]\n54:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e\"}]\n55:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" 0x\"}]\n56:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"FFFFFF\"}]\n57:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]\n58:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        r \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (value \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 16\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u0026\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" 0x\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"FF\"}]]}]\n59:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        g \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (value \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u003e\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 8\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u0026\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" 0x\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"FF\"}]]}]\n5a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        b \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\""])</script><script>self.__next_f.push([1,"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" value \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u0026\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" 0x\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"FF\"}]]}]\n"])</script><script>self.__next_f.push([1,"5b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"#\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"r\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":02X\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"g\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":02X\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"b\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":02X\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"5c:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"#\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":06X\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}]]}]\n5d:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"if\"}]\n5e:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem.get(\"}]\n5f:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"fontFamily\\\"\"}]\n60:[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")}\"}]\n61:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n62:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    element_types \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"backgroundimage\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"colorbox\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"picturebox\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}]\n63:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    composition \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Counter(\"}]]}]\n64:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        elem.tag \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" root.iter() \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" elem.tag \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" element_types\"}]]}]\n65:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}]\n66:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]\n67:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,"])</script><script>self.__next_f.push([1,"{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}]\n68:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"colors\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"sorted\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(colors),\"}]]}]\n69:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"fonts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"sorted\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(fonts),\"}]]}]\n6a:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"composition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(composition),\"}]]}]\n"])</script><script>self.__next_f.push([1,"6b:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"canvas_size\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"root.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'width'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'0'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"x\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"root.get(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'height'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'0'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}]\n"])</script><script>self.__next_f.push([1,"6c:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    }\"}]}]\n6d:[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"단색\"}]}]}]\n6e:[\"$\",\"span\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"plaintext\",\"data-theme\":\"github-dark github-light\",\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"children\":\"이미지\"}]}]}]}]\n6f:[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        )\"}]}]\n"])</script></body></html>