---
title: "BOJ 1286 - 부분 직사각형"
date: "2024-05-20"
description: "NxM 격자에서 각 문자가 포함된 부분 직사각형의 개수를 구하는 문제"
tags: ["수학", "조합론"]
platform: "boj"
problem_number: "1286"
problem_url: "https://www.acmicpc.net/problem/1286"
difficulty: "골드 V"
language: "python"
---

## 문제

[BOJ 1286 - 부분 직사각형](https://www.acmicpc.net/problem/1286)

> N×M 격자에서 각 알파벳 A~Z가 포함된 부분 직사각형의 개수를 구한다.

## 풀이

각 칸 (i,j)를 포함하는 부분 직사각형의 개수는 행 방향과 열 방향의 기여도를 곱한 값이다. 행 기여도는 (i+1)(2N-i)+(i+N+1)(N-i), 열 기여도도 동일한 패턴으로 계산한다.

## 코드

```python
N, M = map(int, input().split())
result = [0] * 26
for i in range(N):
    row = (i + 1) * (2 * N - i) + (i + N + 1) * (N - i)
    S = input()
    for j in range(M):
        col = (j + 1) * (2 * M - j) + (j + M + 1) * (M - j)
        result[ord(S[j]) - ord("A")] += row * col
for i in result:
    print(i)
```

## 복잡도

- 시간: O(NM)
- 공간: O(1)
