---
title: "BOJ 1089 - 스타트링크 타워"
date: "2024-03-12"
description: "수학, 구현, 확률론 문제"
tags: ["수학", "구현", "확률론"]
platform: "boj"
problem_number: "1089"
problem_url: "https://www.acmicpc.net/problem/1089"
difficulty: "골드 IV"
language: "java"
---

## 문제

[BOJ 1089 - 스타트링크 타워](https://www.acmicpc.net/problem/1089)

## 풀이

문제의 조건을 그대로 구현한다.

## 코드

```java
package day799;

import java.io.*;
import java.util.*;

public class Day770BOJ1089스타트링크타워 {
  static final String[] NUMS = {
      "####.##.##.####",
      "..#..#..#..#..#",
      "###..#####..###",
      "###..####..####",
      "#.##.####..#..#",
      "####..###..####",
      "####..####.####",
      "###..#..#..#..#",
      "####.#####.####",
      "####.####..####"
  };
  static String[] map = { "", "", "", "", "" };

  public static void main(String[] args) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int N = Integer.parseInt(br.readLine());
    for (int i = 0; i < 5; i++) {
      map[i] = br.readLine();
    }

    @SuppressWarnings("unchecked")
    HashSet<Double>[] set = new HashSet[N];
    for (int i = 0; i < N; i++)
      set[i] = new HashSet<>();
    int strLen = 4 * N - 1;
    int totalSize = 1;
    int[] digitCount = new int[N];
    Arrays.fill(digitCount, 1);
    for (int i = 0; i < 5; i++) {
      for (int j = 0; j < strLen; j += 4) {
        int index = j / 4;
        for (int k = 0; k < 10; k++) {
          double value = Math.pow(10, N - 1 - index) * k;
          if (canNum(i, j, k)) {
            if (i == 0) {
              set[index].add(value);
            }
          } else {
            set[index].remove(value);
          }
        }
        if (set[index].size() == 0) {
          System.out.println("-1");
          return;
        }
        if (i == 4) {
          totalSize = totalSize * set[index].size();
          for (int k = 0; k < N; k++) {
            if (k != index)
              digitCount[k] = digitCount[k] * set[index].size();
          }
        }
      }
    }
    double sum = 0;
    for (int i = 0; i < N; i++) {
      double multi = (double) digitCount[i] / totalSize;
      sum += set[i].stream().mapToDouble(x -> x).map(x -> x * multi).sum();
    }
    System.out.println(sum);
    br.close();
  }

  static boolean canNum(int row, int index, int compareTo) {
    for (int i = 0; i < 3; i++) {
      if (map[row].charAt(index + i) != '.' && map[row].charAt(index + i) != NUMS[compareTo].charAt(row * 3 + i))
        return false;
    }
    return true;
  }
}
```

## 복잡도

- 시간: O(N)
- 공간: O(N)
