---
title: "BOJ 1368 - 물대기"
date: "2024-07-03"
description: "가상 노드를 추가하여 우물 비용과 수로 비용을 통합한 최소 스패닝 트리 문제"
tags: ["그래프", "최소 스패닝 트리"]
platform: "boj"
problem_number: "1368"
problem_url: "https://www.acmicpc.net/problem/1368"
difficulty: "골드 II"
language: "python"
---

## 문제

[BOJ 1368 - 물대기](https://www.acmicpc.net/problem/1368)

> N개의 논에 물을 대는 최소 비용을 구한다. 각 논에 직접 우물을 파거나 다른 논에서 수로를 연결할 수 있다.

## 풀이

가상의 0번 노드를 추가하여 각 논의 우물 비용을 0번 노드와의 간선으로 표현한다. 이렇게 하면 우물 파기와 수로 연결을 하나의 그래프로 통합할 수 있고, 크루스칼 알고리즘으로 최소 스패닝 트리를 구하면 된다. Union-Find로 사이클을 검사한다.

## 코드

```python
import sys

input = sys.stdin.readline
MAX = float("inf")

N = int(input())
road_list = list()

for i in range(N):
    well_cost = int(input())
    road_list.append((well_cost, i + 1, 0))

for i in range(N):
    road_cost = list(map(int, input().split()))
    for j in range(i + 1, N):
        road_list.append((road_cost[j], i + 1, j + 1))

road_list.sort()
parent = list(range(N + 1))


def find(a):
    if a == parent[a]:
        return parent[a]
    parent[a] = find(parent[a])
    return parent[a]


def union(pa, pb):
    if pa < pb:
        parent[pb] = pa
    else:
        parent[pa] = pb


answer, cnt = 0, N
for cost, a, b in road_list:
    if not cnt:
        break
    pa = find(a)
    pb = find(b)
    if pa != pb:
        cnt -= 1
        union(pa, pb)
        answer += cost

print(answer)
```

## 복잡도

- 시간: O(E * log E) (E: 간선 수, 최대 N^2)
- 공간: O(N^2)
