---
title: "BOJ 12969 - ABC"
date: "2024-05-24"
description: "A, B, C로 구성된 길이 N 문자열에서 i<j이고 S[i]<S[j]인 쌍이 정확히 K개인 문자열을 찾는 문제"
tags: ["DP"]
platform: "boj"
problem_number: "12969"
problem_url: "https://www.acmicpc.net/problem/12969"
difficulty: "골드 I"
language: "python"
---

## 문제

[BOJ 12969 - ABC](https://www.acmicpc.net/problem/12969)

> 길이 N인 A, B, C로만 이루어진 문자열 중 i < j이면서 S[i] < S[j]인 쌍의 수가 정확히 K인 문자열을 구한다.

## 풀이

DFS + 메모이제이션으로 해결한다. 현재까지 사용한 A의 개수, B의 개수, 현재 위치, 현재까지의 쌍 수를 상태로 관리한다. 각 위치에서 A, B, C를 놓을 때 새로 생기는 쌍의 수는 해당 문자보다 작은 문자의 개수이다. B를 놓으면 A 개수만큼, C를 놓으면 A+B 개수만큼 쌍이 추가된다.

## 코드

```python
import sys


def dfs(a, b, l, t):
    global n, p
    if l == n:
        if t == p:
            print("".join(s))
            sys.exit()
        else:
            return

    if memo.get((a, b, l, t)) is None:
        memo[(a, b, l, t)] = True
    else:
        return

    s[l] = "A"
    dfs(a + 1, b, l + 1, t)
    s[l] = "B"
    dfs(a, b + 1, l + 1, t + a)
    s[l] = "C"
    dfs(a, b, l + 1, t + a + b)


n, p = map(int, sys.stdin.readline().rstrip().split())
memo = {}
s = [""] * n

dfs(0, 0, 0, 0)
print(-1)
```

## 복잡도

- 시간: O(N^3 * K)
- 공간: O(N^3 * K)
