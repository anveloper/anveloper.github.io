---
title: "BOJ 1184 - 귀농"
date: "2024-03-25"
description: "N×N 격자에서 합이 같은 두 직사각형 쌍의 개수를 구하는 문제"
tags: ["브루트포스", "누적 합", "해시"]
platform: "boj"
problem_number: "1184"
problem_url: "https://www.acmicpc.net/problem/1184"
difficulty: "골드 I"
language: "javascript"
---

## 문제

[BOJ 1184 - 귀농](https://www.acmicpc.net/problem/1184)

> N×N 격자에서 꼭짓점을 공유하는 두 직사각형의 합이 같은 쌍의 수를 구한다.

## 풀이

2차원 누적 합 배열을 구성한 뒤, 모든 꼭짓점 (x, y)를 기준으로 좌상-우하, 좌하-우상 방향의 직사각형 쌍을 탐색한다. 한쪽 직사각형의 합을 Map에 저장하고, 반대쪽에서 같은 합이 존재하면 카운트를 누적한다.

## 코드

```javascript
const solution = (input) => {
  const N = +input[0];
  const data = [];
  for (let i = 1; i <= N; i++) {
    data.push(input[i].trim().split(" ").map((el) => +el));
  }

  let sum = new Array(N + 1);
  for (let i = 0; i <= N; i++) {
    sum[i] = new Array(N + 1).fill(0);
  }

  let cnt = new Map();
  let result = 0;

  const firstFunc = (x, y) => {
    for (let i = 0; i < x; i++) {
      for (let j = 0; j < y; j++) {
        let tmp = sum[x][y] - sum[x][j] - sum[i][y] + sum[i][j];
        if (cnt.has(tmp)) cnt.set(tmp, cnt.get(tmp) + 1);
        else cnt.set(tmp, 1);
      }
    }
    for (let i = x + 1; i <= N; i++) {
      for (let j = y + 1; j <= N; j++) {
        let tmp = sum[i][j] - sum[i][y] - sum[x][j] + sum[x][y];
        if (cnt.has(tmp)) result += cnt.get(tmp);
      }
    }
    cnt.clear();
  };

  const secondFunc = (x, y) => {
    for (let i = x + 1; i <= N; i++) {
      for (let j = 0; j < y; j++) {
        let tmp = sum[i][y] - sum[i][j] - sum[x][y] + sum[x][j];
        if (cnt.has(tmp)) cnt.set(tmp, cnt.get(tmp) + 1);
        else cnt.set(tmp, 1);
      }
    }
    for (let i = 0; i < x; i++) {
      for (let j = y + 1; j <= N; j++) {
        let tmp = sum[x][j] - sum[x][y] - sum[i][j] + sum[i][y];
        if (cnt.has(tmp)) result += cnt.get(tmp);
      }
    }
    cnt.clear();
  };

  for (let i = 1; i <= N; i++) {
    for (let j = 1; j <= N; j++) {
      sum[i][j] = data[i - 1][j - 1] + sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1];
    }
  }

  for (let i = 1; i < N; i++) {
    for (let j = 1; j < N; j++) {
      firstFunc(i, j);
      secondFunc(i, j);
    }
  }
  return result;
};

const fs = require("fs");
const input = fs.readFileSync("./dev/stdin").toString().split("\n");
console.log(solution(input));
```

## 복잡도

- 시간: O(N⁴)
- 공간: O(N²)
