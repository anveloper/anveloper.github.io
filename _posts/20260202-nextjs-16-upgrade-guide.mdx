---
title: 'Next.js 16 업그레이드: 실무 프로젝트 마이그레이션 기록'
date: '2026-02-02'
description: 'Next.js 15에서 16으로, React 18에서 19로, NextAuth v4에서 v5로. 대규모 프로젝트의 메이저 업그레이드 과정을 정리했다.'
tags: ['Next.js', 'React', 'NextAuth', 'Migration']
---

# Next.js 16 업그레이드: 실무 프로젝트 마이그레이션 기록

## 배경

운영 중인 대규모 프로젝트(900개 이상 파일, 80개 이상 페이지)를 Next.js 15에서 16으로 업그레이드했다. React 18에서 19로, NextAuth v4에서 v5로의 전환도 함께 진행되었기에 단순한 버전 범프와는 거리가 멀었다.

| 패키지 | 이전 버전 | 현재 버전 |
|--------|----------|----------|
| next | 15.5.11 | 16.1.6 |
| react | 18.3.1 | 19.2.4 |
| next-auth | 4.x | 5.0.0-beta.30 |

이 글에서는 실제 마이그레이션 과정에서 만난 주요 변경사항과 대응 방법을 정리한다.

## NextAuth v5 마이그레이션

가장 영향 범위가 컸다. **206개 파일**이 변경 대상이었다.

### 파일 구조 변경

v4에서는 API route 내부에 인증 설정을 두었지만, v5에서는 `lib/`로 분리하여 중앙화하는 구조로 바뀌었다.

```
# v4
app/api/auth/[...nextauth]/auth-option.ts  → 삭제
app/api/auth/[...nextauth]/route.ts

# v5
lib/auth.ts              # auth() 함수 export
lib/auth.config.ts       # NextAuth 설정
app/api/auth/[...nextauth]/route.ts
```

### 세션 조회 방식 변경

`getServerSession(authOptions)`를 호출하던 모든 곳을 `auth()`로 교체해야 한다. 함수명이 짧아진 것은 좋지만, 206개 파일을 수정하는 것은 단순 반복 작업이었다.

```typescript
// v4
import { getServerSession } from "next-auth";
import { authOptions } from "@/app/api/auth/[...nextauth]/auth-option";
const session = await getServerSession(authOptions);

// v5
import { auth } from "@/lib/auth";
const session = await auth();
```

### route.ts 변경

route handler도 간결해졌다.

```typescript
// v4
import NextAuth from "next-auth";
import { authOptions } from "./auth-option";
const handler = NextAuth(authOptions);
export { handler as GET, handler as POST };

// v5
import { handlers } from "@/lib/auth";
export const { GET, POST } = handlers;
```

설정이 중앙화되면서 코드 자체는 깔끔해졌으나, 전환 과정의 작업량이 상당했다. IDE의 전체 검색과 일괄 치환에 크게 의존했다.

## middleware.ts → proxy.ts

Next.js 16에서 middleware 파일명이 `proxy.ts`로 변경되었다. 파일명 하나만 바꾸면 되지만, 모르면 한참 헤맬 수 있는 변경이다.

```
이전: middleware.ts
현재: proxy.ts
```

## Async Request API

Next.js 15부터 도입된 변경이지만, 이번 업그레이드에서 본격적으로 대응했다. `params`와 `searchParams`가 Promise로 변경되어 **173개 파일**이 영향을 받았다.

```typescript
// 이전
export default function Page({ params }: { params: { id: string } }) {
  const { id } = params;
}

// 현재
export default async function Page({
  params,
}: {
  params: Promise<{ id: string }>;
}) {
  const { id } = await params;
}
```

다행히 Next.js에서 제공하는 codemod가 잘 동작했다. 수동으로 173개 파일을 수정할 생각을 하면 아찔하다.

## React 19 타입 호환성

### useRef 타입 변경

React 19에서 `useRef`의 타입 시그니처가 변경되었다.

```typescript
// 이전
const ref = useRef<HTMLDivElement>(null);

// 현재 (React 19)
const ref = useRef<HTMLDivElement | null>(null);
```

`null`을 유니온으로 명시해야 한다. 빌드 시 타입 에러로 잡히기 때문에 놓칠 일은 없지만, 수정해야 할 곳이 적지 않았다.

## SVG Import 변경

`@svgr/webpack`이 Turbopack과 호환되지 않는 문제가 있었다. SVG 파일을 TSX 컴포넌트로 직접 변환하는 방식으로 우회했다.

```typescript
// 이전
import AlarmIcon from "@/assets/icons/svg/alarm.svg";

// 현재
import AlarmIcon from "@/assets/icons/svg/alarm";
// alarm.tsx 파일로 변환
```

9개 파일에서 사용 중이던 SVG를 모두 TSX 컴포넌트로 변환했다. 번거롭지만 Turbopack의 빌드 속도를 고려하면 합리적인 선택이었다.

## next.config.mjs 변경

Next.js 16에서 ESLint 관련 설정이 제거되었다. 기존에 `eslint.ignoreDuringBuilds` 옵션을 사용하고 있었다면 해당 설정을 삭제해야 한다.

```javascript
// 이전
const nextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
};

// 현재: eslint 설정 제거
```

## 정리

이번 마이그레이션에서 수정된 파일 수를 정리하면 다음과 같다.

| 변경 항목 | 영향 파일 수 |
|----------|------------|
| NextAuth v5 전환 | 206개 |
| Async Request API | 173개 |
| SVG Import 변환 | 9개 |

**핵심 교훈**:

- 메이저 업그레이드는 한 번에 하나씩 진행하고 싶지만, 의존성 관계상 동시에 해야 할 때가 있다. 이 경우 변경 단위를 나누어 커밋하면 문제 발생 시 롤백이 수월하다.
- codemod가 제공되는 변경사항은 적극적으로 활용하는 것이 좋다. Async Request API는 codemod 없이는 현실적으로 힘들었을 것이다.
- 파일명 변경(`middleware.ts` → `proxy.ts`)처럼 사소하지만 치명적인 변경은 릴리즈 노트를 꼼꼼히 읽어야만 발견할 수 있다.
